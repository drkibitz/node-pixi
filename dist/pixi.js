/**
 * pixi 0.3.0 (2c34ecd)
 * http://drkibitz.github.io/node-pixi/
 * Copyright (c) 2013-2015 Dr. Kibitz, http://drkibitz.com
 * Super fast 2D rendering engine for browserify, that uses WebGL with a context 2d fallback.
 * built: Fri Apr 17 2015 15:44:26 GMT-0700 (PDT)
 *
 * Pixi.js - v1.3.0
 * Copyright (c) 2012, Mat Groves
 */
!function(a,b){b["true"]=a,function c(a,b,d){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,c,a,b,d)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){this.global=new g,this.local=new g,this.target=null,this.originalEvent=null}function e(a){this.stage=a,this.mouse=new d,this.touchs={},this.tempPoint=new g,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.last=0}var f=a("./core/globals"),g=a("./geom/Point"),h=a("./display/Sprite"),i=a("./platform");d.prototype.getLocalPosition=function(a){var b=a.worldTransform,c=this.global,d=b[0],e=b[1],f=b[2],h=b[3],i=b[4],j=b[5],k=1/(d*i+e*-h);return new g(i*k*c.x+-e*k*c.y+(j*e-f*i)*k,d*k*c.y+-h*k*c.x+(-j*d+f*h)*k)};var j=e.prototype;j.handleEvent=function(a){switch(a.type){case"mousedown":this.onMouseDown(a);break;case"mousemove":this.onMouseMove(a);break;case"mouseup":this.onMouseUp(a);break;case"mouseout":this.onMouseOut(a);break;case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a)}},j.collectInteractiveSprite=function(a,b){for(var c=a.children,d=c.length-1;d>=0;d--){var e=c[d];e.interactive?(b.interactiveChildren=!0,this.interactiveItems.push(e),e.children.length>0&&this.collectInteractiveSprite(e,e)):(e.__iParent=null,e.children.length>0&&this.collectInteractiveSprite(e,b))}},j.setTarget=function(a){a?null===this.interactionDOMElement&&this.setTargetDomElement(a.view):null!==this.target&&i.window.removeEventListener("mouseup",this,!0),i.window.addEventListener("mouseup",this,!0),this.target=a},j.setTargetDomElement=function(a){null!==this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this,!0),this.interactionDOMElement.removeEventListener("mousedown",this,!0),this.interactionDOMElement.removeEventListener("mouseout",this,!0),this.interactionDOMElement.removeEventListener("touchstart",this,!0),this.interactionDOMElement.removeEventListener("touchend",this,!0),this.interactionDOMElement.removeEventListener("touchmove",this,!0));var b=i.navigator;b&&b.msPointerEnabled&&(a.style["-ms-content-zooming"]="none",a.style["-ms-touch-action"]="none"),a.addEventListener("mousemove",this,!0),a.addEventListener("mousedown",this,!0),a.addEventListener("mouseout",this,!0),a.addEventListener("touchstart",this,!0),a.addEventListener("touchend",this,!0),a.addEventListener("touchmove",this,!0),this.interactionDOMElement=a},j.update=function(){if(this.target){var a=Date.now(),b=a-this.last;if(b=30*b/1e3,!(1>b)){this.last=a;var c,d;if(this.dirty){for(this.dirty=!1,c=0,d=this.interactiveItems.length;d>c;c++)this.interactiveItems[c].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)}for(this.interactionDOMElement.style.cursor="inherit",c=0,d=this.interactiveItems.length;d>c;c++){var e=this.interactiveItems[c];(e.mouseover||e.mouseout||e.buttonMode)&&(e.__hit=this.hitTest(e,this.mouse),this.mouse.target=e,e.__hit?(e.buttonMode&&(this.interactionDOMElement.style.cursor=e.defaultCursor),e.__isOver||(e.mouseover&&e.mouseover(this.mouse),e.__isOver=!0)):e.__isOver&&(e.mouseout&&e.mouseout(this.mouse),e.__isOver=!1))}}}},j.onMouseMove=function(a){this.mouse.originalEvent=a;var b=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(a.clientX-b.left)*(this.target.width/b.width),this.mouse.global.y=(a.clientY-b.top)*(this.target.height/b.height);for(var c=0,d=this.interactiveItems.length;d>c;c++){var e=this.interactiveItems[c];e.mousemove&&e.mousemove(this.mouse)}},j.onMouseDown=function(a){this.mouse.originalEvent=a;for(var b=0,c=this.interactiveItems.length;c>b;b++){var d=this.interactiveItems[b];if((d.mousedown||d.click)&&(d.__mouseIsDown=!0,d.__hit=this.hitTest(d,this.mouse),d.__hit&&(d.mousedown&&d.mousedown(this.mouse),d.__isDown=!0,!d.interactiveChildren)))break}},j.onMouseOut=function(){this.interactionDOMElement.style.cursor="inherit";for(var a=0,b=this.interactiveItems.length;b>a;a++){var c=this.interactiveItems[a];c.__isOver&&(this.mouse.target=c,c.mouseout&&c.mouseout(this.mouse),c.__isOver=!1)}},j.onMouseUp=function(a){this.mouse.originalEvent=a;for(var b=!1,c=0,d=this.interactiveItems.length;d>c;c++){var e=this.interactiveItems[c];(e.mouseup||e.mouseupoutside||e.click)&&(e.__hit=this.hitTest(e,this.mouse),e.__hit&&!b?(e.mouseup&&e.mouseup(this.mouse),e.__isDown&&e.click&&e.click(this.mouse),e.interactiveChildren||(b=!0)):e.__isDown&&e.mouseupoutside&&e.mouseupoutside(this.mouse),e.__isDown=!1)}},j.hitTest=function(a,b){var c=b.global;if(a.vcount!==f.visibleCount)return!1;var d=a instanceof h,e=a.worldTransform,g=e[0],i=e[1],j=e[2],k=e[3],l=e[4],m=e[5],n=1/(g*l+i*-k),o=l*n*c.x+-i*n*c.y+(m*i-j*l)*n,p=g*n*c.y+-k*n*c.x+(-m*g+j*k)*n;if(b.target=a,a.hitArea&&a.hitArea.contains)return a.hitArea.contains(o,p)?(b.target=a,!0):!1;if(d){var q,r=a.texture.frame.width,s=a.texture.frame.height,t=-r*a.anchor.x;if(o>t&&t+r>o&&(q=-s*a.anchor.y,p>q&&q+s>p))return b.target=a,!0}for(var u=0,v=a.children.length;v>u;u++){var w=a.children[u],x=this.hitTest(w,b);if(x)return b.target=a,!0}return!1},j.onTouchMove=function(a){var b,c,d,e,f,g,h,i=this.interactionDOMElement.getBoundingClientRect(),j=a.changedTouches;for(b=0,c=j.length;c>b;b++)for(d=j[b],e=this.touchs[d.identifier],e.originalEvent=a,e.global.x=(d.clientX-i.left)*(this.target.width/i.width),e.global.y=(d.clientY-i.top)*(this.target.height/i.height),f=0,g=this.interactiveItems.length;g>f;f++)h=this.interactiveItems[b],h.touchmove&&h.touchmove(e)},j.onTouchStart=function(a){for(var b=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,e=0,f=c.length;f>e;e++){var g=c[e],h=this.pool.pop();h||(h=new d),h.originalEvent=a,this.touchs[g.identifier]=h,h.global.x=(g.clientX-b.left)*(this.target.width/b.width),h.global.y=(g.clientY-b.top)*(this.target.height/b.height);for(var i=0,j=this.interactiveItems.length;j>i;i++){var k=this.interactiveItems[i];if((k.touchstart||k.tap)&&(k.__hit=this.hitTest(k,h),k.__hit&&(k.touchstart&&k.touchstart(h),k.__isDown=!0,k.__touchData=h,!k.interactiveChildren)))break}}},j.onTouchEnd=function(a){for(var b=this.interactionDOMElement.getBoundingClientRect(),c=a.changedTouches,d=0,e=c.length;e>d;d++){var f=c[d],g=this.touchs[f.identifier],h=!1;g.global.x=(f.clientX-b.left)*(this.target.width/b.width),g.global.y=(f.clientY-b.top)*(this.target.height/b.height);for(var i=0,j=this.interactiveItems.length;j>i;i++){var k=this.interactiveItems[i],l=k.__touchData;k.__hit=this.hitTest(k,g),l===g&&(g.originalEvent=a,(k.touchend||k.tap)&&(k.__hit&&!h?(k.touchend&&k.touchend(g),k.__isDown&&k.tap&&k.tap(g),k.interactiveChildren||(h=!0)):k.__isDown&&k.touchendoutside&&k.touchendoutside(g),k.__isDown=!1),k.__touchData=null)}this.pool.push(g),this.touchs[f.identifier]=null}},b.exports=e},{"./core/globals":2,"./display/Sprite":6,"./geom/Point":34,"./platform":45}],2:[function(a,b,c){"use strict";b.exports={gl:null,primitiveShader:null,stripShader:null,defaultShader:null,offset:null,projection:null,texturesToUpdate:[],texturesToDestroy:[],visibleCount:0}},{}],3:[function(a,b,c){function d(){this.last=this,this.first=this,this.position=new h,this.scale=new h(1,1),this.pivot=new h(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=f.create(),this.localTransform=f.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new i(0,0,1,1)}var e=a("../core/globals"),f=a("../geom/matrix").mat3,g=a("../filters/FilterBlock"),h=a("../geom/Point"),i=a("../geom/Rectangle"),j=d.prototype;j.setInteractive=function(a){this.interactive=a},Object.defineProperty(j,"interactive",{get:function(){return this._interactive},set:function(a){this._interactive=a,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(j,"mask",{get:function(){return this._mask},set:function(a){a?this._mask?(a.start=this._mask.start,a.end=this._mask.end):(this.addFilter(a),a.renderable=!1):(this.removeFilter(this._mask),this._mask.renderable=!0),this._mask=a}}),Object.defineProperty(j,"filters",{get:function(){return this._filters},set:function(a){if(a){this._filters&&this.removeFilter(this._filters),this.addFilter(a);for(var b=[],c=0;c<a.length;c++)for(var d=a[c].passes,e=0;e<d.length;e++)b.push(d[e]);a.start.filterPasses=b}else this._filters&&this.removeFilter(this._filters);this._filters=a}}),j.addFilter=function(a){var b=new g,c=new g;a.start=b,a.end=c,b.data=a,c.data=a,b.first=b.last=this,c.first=c.last=this,b.open=!0,b.target=this;var d,e,f=b,h=b;e=this.first._iPrev,e?(d=e._iNext,f._iPrev=e,e._iNext=f):d=this,d&&(d._iPrev=h,h._iNext=d),f=c,h=c,d=null,e=null,e=this.last,d=e._iNext,d&&(d._iPrev=h,h._iNext=d),f._iPrev=e,e._iNext=f;for(var i=this,j=this.last;i;)i.last===j&&(i.last=c),i=i.parent;this.first=b,this.__renderGroup&&this.__renderGroup.addFilterBlocks(b,c)},j.removeFilter=function(a){var b=a.start,c=b._iNext,d=b._iPrev;c&&(c._iPrev=d),d&&(d._iNext=c),this.first=b._iNext;var e=a.end;c=e._iNext,d=e._iPrev,c&&(c._iPrev=d),d._iNext=c;for(var f=e._iPrev,g=this;g.last===e&&(g.last=f,g=g.parent););this.__renderGroup&&this.__renderGroup.removeFilterBlocks(b,e)},j.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var a=this.localTransform,b=this.parent.worldTransform,c=this.worldTransform;a[0]=this._cr*this.scale.x,a[1]=-this._sr*this.scale.y,a[3]=this._sr*this.scale.x,a[4]=this._cr*this.scale.y;var d=this.pivot.x,f=this.pivot.y,g=a[0],h=a[1],i=this.position.x-a[0]*d-f*a[1],j=a[3],k=a[4],l=this.position.y-a[4]*f-d*a[3],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5];a[2]=i,a[5]=l,c[0]=m*g+n*j,c[1]=m*h+n*k,c[2]=m*i+n*l+o,c[3]=p*g+q*j,c[4]=p*h+q*k,c[5]=p*i+q*l+r,this.worldAlpha=this.alpha*this.parent.worldAlpha,this.vcount=e.visibleCount},b.exports=d},{"../core/globals":2,"../filters/FilterBlock":24,"../geom/Point":34,"../geom/Rectangle":36,"../geom/matrix":37}],4:[function(a,b,c){"use strict";function d(){e.call(this),this.children=[]}var e=a("./DisplayObject"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});f.addChild=function(a){if(a.parent&&a.parent!==this&&a.parent.removeChild(a),a.parent=this,this.children.push(a),this.stage){var b=a;do b.interactive&&(this.stage.dirty=!0),b.stage=this.stage,b=b._iNext;while(b)}var c,d,e=a.first,f=a.last;d=this._filters||this._mask?this.last._iPrev:this.last,c=d._iNext;for(var g=this,h=d;g;)g.last===h&&(g.last=a.last),g=g.parent;c&&(c._iPrev=f,f._iNext=c),e._iPrev=d,d._iNext=e,this.__renderGroup&&(a.__renderGroup&&a.__renderGroup.removeDisplayObjectAndChildren(a),this.__renderGroup.addDisplayObjectAndChildren(a))},f.addChildAt=function(a,b){if(!(b>=0&&b<=this.children.length))throw new Error(a+" The index "+b+" supplied is out of bounds "+this.children.length);if(void 0!==a.parent&&a.parent.removeChild(a),a.parent=this,this.stage){var c=a;do c.interactive&&(this.stage.dirty=!0),c.stage=this.stage,c=c._iNext;while(c)}var d,e,f=a.first,g=a.last;if(b===this.children.length){e=this.last;for(var h=this,i=this.last;h;)h.last===i&&(h.last=a.last),h=h.parent}else e=0===b?this:this.children[b-1].last;d=e._iNext,d&&(d._iPrev=g,g._iNext=d),f._iPrev=e,e._iNext=f,this.children.splice(b,0,a),this.__renderGroup&&(a.__renderGroup&&a.__renderGroup.removeDisplayObjectAndChildren(a),this.__renderGroup.addDisplayObjectAndChildren(a))},f.swapChildren=function(a,b){if(a!==b){var c=this.children.indexOf(a),d=this.children.indexOf(b);if(0>c||0>d)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.removeChild(a),this.removeChild(b),d>c?(this.addChildAt(b,c),this.addChildAt(a,d)):(this.addChildAt(a,d),this.addChildAt(b,c))}},f.getChildAt=function(a){if(a>=0&&a<this.children.length)return this.children[a];throw new Error("Both the supplied DisplayObjects must be a child of the caller "+this)},f.removeChild=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error(a+" The supplied DisplayObject must be a child of the caller "+this);var c=a.first,d=a.last,e=d._iNext,f=c._iPrev;if(e&&(e._iPrev=f),f._iNext=e,this.last===d)for(var g=c._iPrev,h=this;h.last===d&&(h.last=g,h=h.parent););if(d._iNext=null,c._iPrev=null,this.stage){var i=a;do i.interactive&&(this.stage.dirty=!0),i.stage=null,i=i._iNext;while(i)}a.__renderGroup&&a.__renderGroup.removeDisplayObjectAndChildren(a),a.parent=void 0,this.children.splice(b,1)},f.updateTransform=function(){if(this.visible){e.prototype.updateTransform.call(this);for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform()}},b.exports=d},{"./DisplayObject":3}],5:[function(a,b,c){"use strict";function d(a){e.call(this,a[0]),this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1}var e=a("./Sprite"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"totalFrames",{get:function(){return this.textures.length}}),f.stop=function(){this.playing=!1},f.play=function(){this.playing=!0},f.gotoAndStop=function(a){this.playing=!1,this.currentFrame=a;var b=this.currentFrame+.5|0;this.setTexture(this.textures[b%this.textures.length])},f.gotoAndPlay=function(a){this.currentFrame=a,this.playing=!0},f.updateTransform=function(){if(e.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var a=this.currentFrame+.5|0;this.loop||a<this.textures.length?this.setTexture(this.textures[a%this.textures.length]):a>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},b.exports=d},{"./Sprite":6}],6:[function(a,b,c){"use strict";function d(a){if(f.call(this),this.anchor=new g,this.texture=a,this.blendMode=e.NORMAL,this._width=0,this._height=0,a.baseTexture.hasLoaded)this.updateFrame=!0;else{var b=this;this.texture.addEventListener("update",function(){b.onTextureUpdate()})}this.renderable=!0}var e=a("./blendModes"),f=a("./DisplayObjectContainer"),g=a("../geom/Point"),h=a("../textures/Texture"),i=d.prototype=Object.create(f.prototype,{constructor:{value:d}});Object.defineProperty(i,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width,this._width=a}}),Object.defineProperty(i,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height,this._height=a}}),i.setTexture=function(a){this.texture.baseTexture!==a.baseTexture?(this.textureChange=!0,this.texture=a,this.__renderGroup&&this.__renderGroup.updateTexture(this)):this.texture=a,this.updateFrame=!0},i.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},d.fromFrame=function(a){var b=h.cache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache'+this);return new d(b)},d.fromImage=function(a){var b=h.fromImage(a);return new d(b)},b.exports=d},{"../geom/Point":34,"../textures/Texture":63,"./DisplayObjectContainer":4,"./blendModes":8}],7:[function(a,b,c){"use strict";function d(a){h.call(this),this.worldTransform=f.create(),this.interactive=!0,this.interactionManager=new i(this),this.dirty=!0,this.__childrenAdded=[],this.__childrenRemoved=[],this.stage=this,this.stage.hitArea=new j(0,0,1e5,1e5),this.setBackgroundColor(a),this.worldVisible=!0}var e=a("../core/globals"),f=a("../geom/matrix").mat3,g=a("../utils/color").hex2rgb,h=a("./DisplayObjectContainer"),i=a("../InteractionManager"),j=a("../geom/Rectangle"),k=d.prototype=Object.create(h.prototype,{constructor:{value:d}});k.setInteractionDelegate=function(a){this.interactionManager.setTargetDomElement(a)},k.updateTransform=function(){this.worldAlpha=1,this.vcount=e.visibleCount;for(var a=0,b=this.children.length;b>a;a++)this.children[a].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},k.setBackgroundColor=function(a){this.backgroundColor=a||0,this.backgroundColorSplit=g(this.backgroundColor);var b=this.backgroundColor.toString(16);b="000000".substr(0,6-b.length)+b,this.backgroundColorString="#"+b},k.getMousePosition=function(){return this.interactionManager.mouse.global},b.exports=d},{"../InteractionManager":1,"../core/globals":2,"../geom/Rectangle":36,"../geom/matrix":37,"../utils/color":66,"./DisplayObjectContainer":4}],8:[function(a,b,c){"use strict";b.exports={NORMAL:0,SCREEN:1}},{}],9:[function(a,b,c){"use strict";function d(){var a={};this.addEventListener=this.on=function(b,c){void 0===a[b]&&(a[b]=[]),-1===a[b].indexOf(c)&&a[b].push(c)},this.dispatchEvent=this.emit=function(b){if(a[b.type]&&a[b.type].length)for(var c=0,d=a[b.type].length;d>c;c++)a[b.type][c](b)},this.removeEventListener=this.off=function(b,c){var d=a[b].indexOf(c);-1!==d&&a[b].splice(d,1)},this.removeAllEventListeners=function(b){var c=a[b];c&&(c.length=0)}}b.exports=d},{}],10:[function(a,b,c){"use strict";function d(){e.call(this),this.renderable=!0}var e=a("../display/DisplayObject"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});f.renderCanvas=function(){},f.initWebGL=function(){},f.renderWebGL=function(){},b.exports=d},{"../display/DisplayObject":3}],11:[function(a,b,c){"use strict";function d(a,b){e.call(this,a),this.points=b;try{this.verticies=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length)}catch(c){this.verticies=new Array(4*b.length),this.uvs=new Array(4*b.length),this.colors=new Array(2*b.length),this.indices=new Array(2*b.length)}this.refresh()}var e=a("./Strip"),f=a("../display/DisplayObjectContainer"),g=d.prototype=Object.create(e.prototype,{constructor:{value:d}});g.refresh=function(){var a=this.points;if(!(a.length<1)){var b=this.uvs,c=a[0],d=this.indices,e=this.colors;this.count-=.2,b[0]=0,b[1]=1,b[2]=0,b[3]=1,e[0]=1,e[1]=1,d[0]=0,d[1]=1;for(var f,g,h,i=a.length,j=1;i>j;j++)f=a[j],g=4*j,h=j/(i-1),j%2?(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1):(b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1),g=2*j,e[g]=1,e[g+1]=1,g=2*j,d[g]=g,d[g+1]=g+1,c=f}},g.updateTransform=function(){var a=this.points;if(!(a.length<1)){var b,c=a[0],d={x:0,y:0};this.count-=.2;var e=this.verticies;e[0]=c.x+d.x,e[1]=c.y+d.y,e[2]=c.x-d.x,e[3]=c.y-d.y;for(var g,h,i,j,k,l=a.length,m=1;l>m;m++)g=a[m],h=4*m,b=m<a.length-1?a[m+1]:g,d.y=-(b.x-c.x),d.x=b.y-c.y,i=10*(1-m/(l-1)),i>1&&(i=1),j=Math.sqrt(d.x*d.x+d.y*d.y),k=this.texture.height/2,d.x/=j,d.y/=j,d.x*=k,d.y*=k,e[h]=g.x+d.x,e[h+1]=g.y+d.y,e[h+2]=g.x-d.x,e[h+3]=g.y-d.y,c=g;f.prototype.updateTransform.call(this)}},g.setTexture=function(a){this.texture=a,this.updateFrame=!0},b.exports=d},{"../display/DisplayObjectContainer":4,"./Strip":13}],12:[function(a,b,c){"use strict";function d(a){if(f.call(this),this.spineData=d.animCache[a],!this.spineData)throw new Error("Spine data must be preloaded using SpineLoader or AssetLoader: "+a);this.skeleton=new e.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new e.AnimationStateData(this.spineData),this.state=new e.AnimationState(this.stateData),this.slotContainers=[];for(var b=0,c=this.skeleton.drawOrder.length;c>b;b++){var g=this.skeleton.drawOrder[b],h=g.attachment,i=new f;if(this.slotContainers.push(i),this.addChild(i),h instanceof e.RegionAttachment){var j=h.rendererObject.name,k=this.createSprite(g,h.rendererObject);g.currentSprite=k,g.currentSpriteName=j,i.addChild(k)}}}var e=a("../utils/spine"),f=a("../display/DisplayObjectContainer"),g=a("../display/Sprite"),h=a("../textures/Texture"),i=d.prototype=Object.create(f.prototype,{constructor:{value:d}});i.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var b=this.skeleton.drawOrder,c=0,d=b.length;d>c;c++){var g=b[c],h=g.attachment,i=this.slotContainers[c];if(h instanceof e.RegionAttachment){if(h.rendererObject&&(!g.currentSpriteName||g.currentSpriteName!==h.name)){var j=h.rendererObject.name;if(void 0!==g.currentSprite&&(g.currentSprite.visible=!1),g.sprites=g.sprites||{},void 0!==g.sprites[j])g.sprites[j].visible=!0;else{var k=this.createSprite(g,h.rendererObject);i.addChild(k)}g.currentSprite=g.sprites[j],g.currentSpriteName=j}i.visible=!0;var l=g.bone;i.position.x=l.worldX+h.x*l.m00+h.y*l.m01,i.position.y=l.worldY+h.x*l.m10+h.y*l.m11,i.scale.x=l.worldScaleX,i.scale.y=l.worldScaleY,i.rotation=-(g.bone.worldRotation*Math.PI/180)}else i.visible=!1}f.prototype.updateTransform.call(this)},i.createSprite=function(a,b){var c=h.cache[b.name]?b.name:b.name+".png",d=new g(h.fromFrame(c));return d.scale=b.scale,d.rotation=b.rotation,d.anchor.x=d.anchor.y=.5,a.sprites=a.sprites||{},a.sprites[b.name]=d,d},d.animCache={},b.exports=d},{"../display/DisplayObjectContainer":4,"../display/Sprite":6,"../textures/Texture":63,"../utils/spine":69}],13:[function(a,b,c){"use strict";function d(a,b,c){f.call(this),this.texture=a,this.blendMode=e.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(d){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}if(this.width=b,this.height=c,a.baseTexture.hasLoaded)this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0;else{var g=this;this.texture.addEventListener("update",function(){g.onTextureUpdate()})}this.renderable=!0}var e=a("../display/blendModes"),f=a("../display/DisplayObjectContainer"),g=d.prototype=Object.create(f.prototype,{constructor:{value:d}});g.setTexture=function(a){this.texture=a,this.width=a.frame.width,this.height=a.frame.height,this.updateFrame=!0},g.onTextureUpdate=function(){this.updateFrame=!0},b.exports=d},{"../display/DisplayObjectContainer":4,"../display/blendModes":8}],14:[function(a,b,c){"use strict";function d(a,b,c){f.call(this),this.texture=a,this.width=b,this.height=c,this.tileScale=new g(1,1),this.tilePosition=new g(0,0),this.renderable=!0,this.blendMode=e.NORMAL}var e=a("../display/blendModes"),f=a("../display/DisplayObjectContainer"),g=a("../geom/Point"),h=d.prototype=Object.create(f.prototype,{constructor:{value:d}});h.setTexture=function(a){this.texture=a,this.updateFrame=!0},h.onTextureUpdate=function(){this.updateFrame=!0},b.exports=d},{"../display/DisplayObjectContainer":4,"../display/blendModes":8,"../geom/Point":34}],15:[function(a,b,c){"use strict";function d(a,b){this.passes=[this],this.dirty=!0,this.padding=0,this.uniforms=b||{},this.fragmentSrc=a||[]}b.exports=d},{}],16:[function(a,b,c){"use strict";function d(){this.blurXFilter=new e,this.blurYFilter=new f,this.passes=[this.blurXFilter,this.blurYFilter]}var e=a("./BlurXFilter"),f=a("./BlurYFilter"),g=d.prototype;Object.defineProperty(g,"blur",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a}}),Object.defineProperty(g,"blurX",{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a}}),Object.defineProperty(g,"blurY",{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a}}),b.exports=d},{"./BlurXFilter":17,"./BlurYFilter":18}],17:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.dirty=!0,this.uniforms.blur.value=1/7e3*a}}),b.exports=d},{"./AbstractFilter":15}],18:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.exports=d},{"./AbstractFilter":15}],19:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","   gl_FragColor = gl_FragColor * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=a}}),b.exports=d},{"./AbstractFilter":15}],20:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"step",{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}),b.exports=d},{"./AbstractFilter":15}],21:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.exports=d},{"./AbstractFilter":15}],22:[function(a,b,c){"use strict";function d(a){e.call(this),this.passes=[this],a.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:a},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},a.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=a.width,this.uniforms.mapDimensions.value.y=a.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),a.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","   gl_FragColor = gl_FragColor * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});f.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(f,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(a){this.uniforms.displacementMap.value=a}}),Object.defineProperty(f,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}}),Object.defineProperty(f,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}),b.exports=d},{"./AbstractFilter":15}],23:[function(a,b,c){
"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"scale",{get:function(){return this.uniforms.scale.value},set:function(a){this.dirty=!0,this.uniforms.scale.value=a}}),Object.defineProperty(f,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.exports=d},{"./AbstractFilter":15}],24:[function(a,b,c){"use strict";function d(){this.visible=!0,this.renderable=!0}b.exports=d},{}],25:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","   gl_FragColor = gl_FragColor * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"gray",{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}),b.exports=d},{"./AbstractFilter":15}],26:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","   gl_FragColor = gl_FragColor * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"invert",{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}),b.exports=d},{"./AbstractFilter":15}],27:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.dirty=!0,this.uniforms.pixelSize.value=a}}),b.exports=d},{"./AbstractFilter":15}],28:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(a){this.uniforms.blur.value=1/7e3*a}}),b.exports=d},{"./AbstractFilter":15}],29:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","   gl_FragColor = gl_FragColor * vColor;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}),b.exports=d},{"./AbstractFilter":15}],30:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","const vec2 delta = vec2(1.0/10.0, 0.0);","float random(vec3 scale, float seed) {","   return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);","}","void main(void) {","   vec4 color = vec4(0.0);","   float total = 0.0;","   float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);","   for (float t = -30.0; t <= 30.0; t++) {","       float percent = (t + offset - 0.5) / 30.0;","       float weight = 1.0 - abs(percent);","       vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);","       sample.rgb *= sample.a;","       color += sample * weight;","       total += weight;","   }","   gl_FragColor = color / total;","   gl_FragColor.rgb /= gl_FragColor.a + 0.00001;","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"blur",{get:function(){return this.uniforms.blur.value},set:function(a){this.uniforms.blur.value=a}}),b.exports=d},{"./AbstractFilter":15}],31:[function(a,b,c){"use strict";function d(){e.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]}var e=a("./AbstractFilter"),f=d.prototype=Object.create(e.prototype,{constructor:{value:d}});Object.defineProperty(f,"offset",{get:function(){return this.uniforms.offset.value},set:function(a){this.dirty=!0,this.uniforms.offset.value=a}}),Object.defineProperty(f,"radius",{get:function(){return this.uniforms.radius.value},set:function(a){this.dirty=!0,this.uniforms.radius.value=a}}),Object.defineProperty(f,"angle",{get:function(){return this.uniforms.angle.value},set:function(a){this.dirty=!0,this.uniforms.angle.value=a}}),b.exports=d},{"./AbstractFilter":15}],32:[function(a,b,c){"use strict";function d(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0}var e=d.prototype;e.clone=function(){return new d(this.x,this.y,this.radius)},e.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},b.exports=d},{}],33:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0}var e=a("./Rectangle"),f=d.prototype;f.clone=function(){return new d(this.x,this.y,this.width,this.height)},f.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width-.5,d=(b-this.y)/this.height-.5;return c*=c,d*=d,.25>c+d},f.getBounds=function(){return new e(this.x,this.y,this.width,this.height)},b.exports=d},{"./Rectangle":36}],34:[function(a,b,c){"use strict";function d(a,b){this.x=a||0,this.y=b||0}d.prototype.clone=function(){return new d(this.x,this.y)},b.exports=d},{}],35:[function(a,b,c){"use strict";function d(a){if(a instanceof Array||(a=Array.prototype.slice.call(arguments)),"number"==typeof a[0]){for(var b=[],c=0,d=a.length;d>c;c+=2)b.push(new e(a[c],a[c+1]));a=b}this.points=a}var e=a("./Point"),f=d.prototype;f.clone=function(){for(var a=[],b=0;b<this.points.length;b++)a.push(this.points[b].clone());return new d(a)},f.contains=function(a,b){for(var c=!1,d=0,e=this.points.length-1;d<this.points.length;e=d++){var f=this.points[d].x,g=this.points[d].y,h=this.points[e].x,i=this.points[e].y,j=g>b!=i>b&&(h-f)*(b-g)/(i-g)+f>a;j&&(c=!c)}return c},b.exports=d},{"./Point":34}],36:[function(a,b,c){"use strict";function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0}var e=d.prototype;e.clone=function(){return new d(this.x,this.y,this.width,this.height)},e.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=this.x;if(a>=c&&a<=c+this.width){var d=this.y;if(b>=d&&b<=d+this.height)return!0}return!1},b.exports=d},{}],37:[function(a,b,c){"use strict";var d=c.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,e=c.mat3={},f=c.mat4={};e.create=function(){var a=new d(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},f.create=function(){var a=new d(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=b[0],n=b[1],o=b[2],p=b[3],q=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return c[0]=m*d+n*g+o*j,c[1]=m*e+n*h+o*k,c[2]=m*f+n*i+o*l,c[3]=p*d+q*g+r*j,c[4]=p*e+q*h+r*k,c[5]=p*f+q*i+r*l,c[6]=s*d+t*g+u*j,c[7]=s*e+t*h+u*k,c[8]=s*f+t*i+u*l,c},e.clone=function(a){var b=new d(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=c,a[5]=a[7],a[6]=d,a[7]=e,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},e.toMat4=function(a,b){return b||(b=f.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},f.create=function(){var a=new d(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},f.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=f,a[11]=a[14],a[12]=e,a[13]=g,a[14]=h,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},f.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3];return c[0]=t*d+u*h+v*l+w*p,c[1]=t*e+u*i+v*m+w*q,c[2]=t*f+u*j+v*n+w*r,c[3]=t*g+u*k+v*o+w*s,t=b[4],u=b[5],v=b[6],w=b[7],c[4]=t*d+u*h+v*l+w*p,c[5]=t*e+u*i+v*m+w*q,c[6]=t*f+u*j+v*n+w*r,c[7]=t*g+u*k+v*o+w*s,t=b[8],u=b[9],v=b[10],w=b[11],c[8]=t*d+u*h+v*l+w*p,c[9]=t*e+u*i+v*m+w*q,c[10]=t*f+u*j+v*n+w*r,c[11]=t*g+u*k+v*o+w*s,t=b[12],u=b[13],v=b[14],w=b[15],c[12]=t*d+u*h+v*l+w*p,c[13]=t*e+u*i+v*m+w*q,c[14]=t*f+u*j+v*n+w*r,c[15]=t*g+u*k+v*o+w*s,c}},{}],38:[function(a,b,c){"use strict";var d=a("./core/globals"),e=a("./renderers/webgl/shaders"),f=a("./geom/matrix"),g=b.exports=Object.create(d);g.Point=a("./geom/Point"),g.Rectangle=a("./geom/Rectangle"),g.Polygon=a("./geom/Polygon"),g.Circle=a("./geom/Circle"),g.Ellipse=a("./geom/Ellipse"),g.Matrix=f.Matrix,g.mat3=f.mat3,g.mat4=f.mat4,g.blendModes=a("./display/blendModes"),g.DisplayObject=a("./display/DisplayObject"),g.DisplayObjectContainer=a("./display/DisplayObjectContainer"),g.Sprite=a("./display/Sprite"),g.MovieClip=a("./display/MovieClip"),g.AbstractFilter=a("./filters/AbstractFilter"),g.BlurFilter=a("./filters/BlurFilter"),g.BlurXFilter=a("./filters/BlurXFilter"),g.BlurYFilter=a("./filters/BlurYFilter"),g.ColorMatrixFilter=a("./filters/ColorMatrixFilter"),g.ColorStepFilter=a("./filters/ColorStepFilter"),g.CrossHatchFilter=a("./filters/CrossHatchFilter"),g.DisplacementFilter=a("./filters/DisplacementFilter"),g.DotScreenFilter=a("./filters/DotScreenFilter"),g.FilterBlock=a("./filters/FilterBlock"),g.GrayFilter=a("./filters/GrayFilter"),g.InvertFilter=a("./filters/InvertFilter"),g.PixelateFilter=a("./filters/PixelateFilter"),g.RGBSplitFilter=a("./filters/RGBSplitFilter"),g.SepiaFilter=a("./filters/SepiaFilter"),g.SmartBlurFilter=a("./filters/SmartBlurFilter"),g.TwistFilter=a("./filters/TwistFilter"),g.Text=a("./text/Text"),g.BitmapText=a("./text/BitmapText"),g.InteractionManager=a("./InteractionManager"),g.Stage=a("./display/Stage"),g.EventTarget=a("./events/EventTarget"),g.autoDetectRenderer=a("./utils/autoDetectRenderer"),g.PolyK=a("./utils/Polyk"),g.WebGLGraphics=a("./renderers/webgl/graphics"),g.WebGLRenderer=a("./renderers/webgl/WebGLRenderer"),g.WebGLBatch=a("./renderers/webgl/WebGLBatch"),g.WebGLRenderGroup=a("./renderers/webgl/WebGLRenderGroup"),g.CanvasRenderer=a("./renderers/canvas/CanvasRenderer"),g.CanvasGraphics=a("./renderers/canvas/graphics"),g.Graphics=a("./primitives/Graphics"),g.Strip=a("./extras/Strip"),g.Rope=a("./extras/Rope"),g.TilingSprite=a("./extras/TilingSprite"),g.Spine=a("./extras/Spine"),g.CustomRenderable=a("./extras/CustomRenderable"),g.BaseTexture=a("./textures/BaseTexture"),g.Texture=a("./textures/Texture"),g.RenderTexture=a("./textures/RenderTexture"),g.AssetLoader=a("./loaders/AssetLoader"),g.JsonLoader=a("./loaders/JsonLoader"),g.SpriteSheetLoader=a("./loaders/SpriteSheetLoader"),g.ImageLoader=a("./loaders/ImageLoader"),g.BitmapFontLoader=a("./loaders/BitmapFontLoader"),g.SpineLoader=a("./loaders/SpineLoader"),g.initDefaultShaders=e.initDefaultShaders,g.activatePrimitiveShader=e.activatePrimitiveShader,g.deactivatePrimitiveShader=e.deactivatePrimitiveShader,g.activateStripShader=e.activateStripShader,g.deactivateStripShader=e.deactivateStripShader;var h=a("./utils/debug");g.runList=h.runList},{"./InteractionManager":1,"./core/globals":2,"./display/DisplayObject":3,"./display/DisplayObjectContainer":4,"./display/MovieClip":5,"./display/Sprite":6,"./display/Stage":7,"./display/blendModes":8,"./events/EventTarget":9,"./extras/CustomRenderable":10,"./extras/Rope":11,"./extras/Spine":12,"./extras/Strip":13,"./extras/TilingSprite":14,"./filters/AbstractFilter":15,"./filters/BlurFilter":16,"./filters/BlurXFilter":17,"./filters/BlurYFilter":18,"./filters/ColorMatrixFilter":19,"./filters/ColorStepFilter":20,"./filters/CrossHatchFilter":21,"./filters/DisplacementFilter":22,"./filters/DotScreenFilter":23,"./filters/FilterBlock":24,"./filters/GrayFilter":25,"./filters/InvertFilter":26,"./filters/PixelateFilter":27,"./filters/RGBSplitFilter":28,"./filters/SepiaFilter":29,"./filters/SmartBlurFilter":30,"./filters/TwistFilter":31,"./geom/Circle":32,"./geom/Ellipse":33,"./geom/Point":34,"./geom/Polygon":35,"./geom/Rectangle":36,"./geom/matrix":37,"./loaders/AssetLoader":39,"./loaders/BitmapFontLoader":40,"./loaders/ImageLoader":41,"./loaders/JsonLoader":42,"./loaders/SpineLoader":43,"./loaders/SpriteSheetLoader":44,"./primitives/Graphics":46,"./renderers/canvas/CanvasRenderer":47,"./renderers/canvas/graphics":48,"./renderers/webgl/WebGLBatch":52,"./renderers/webgl/WebGLRenderGroup":54,"./renderers/webgl/WebGLRenderer":55,"./renderers/webgl/graphics":57,"./renderers/webgl/shaders":58,"./text/BitmapText":59,"./text/Text":60,"./textures/BaseTexture":61,"./textures/RenderTexture":62,"./textures/Texture":63,"./utils/Polyk":64,"./utils/autoDetectRenderer":65,"./utils/debug":67}],39:[function(a,b,c){"use strict";function d(a){var b="data:",c=a.slice(0,b.length).toLowerCase();if(c===b){var d=a.slice(b.length),e=d.indexOf(",");if(-1===e)return null;var f=d.slice(0,e).split(";")[0];return f&&"text/plain"!==f.toLowerCase()?f.split("/").pop().toLowerCase():"txt"}return null}function e(a,b){f.call(this),this.assetURLs=a,this.crossorigin=b}var f=a("../events/EventTarget"),g={},h=e.prototype;h.load=function(){function a(){b.onAssetLoaded()}var b=this;this.loadCount=this.assetURLs.length;for(var c=0,e=this.assetURLs.length;e>c;c++){var f=this.assetURLs[c],h=d(f);h||(h=f.split("?").shift().split(".").pop().toLowerCase());var i=g[h];if(!i)throw new Error(h+" is an unsupported file type");var j=new i(f,this.crossorigin);j.addEventListener("loaded",a),j.load()}},h.onAssetLoaded=function(){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this}),this.onProgress&&this.onProgress(),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},e.registerLoaderType=function(a,b){g[a]=b},b.exports=e},{"../events/EventTarget":9}],40:[function(a,b,c){"use strict";function d(a,b){h.call(this),this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null}var e=a("./AssetLoader"),f=a("./ImageLoader"),g=a("../geom/Rectangle"),h=a("../events/EventTarget"),i=a("../text/BitmapText"),j=a("../textures/Texture"),k=a("../platform"),l=d.prototype;l.handleEvent=function(a){switch(a.type){case"load":this.onXMLLoaded();break;default:this.onError()}},l.load=function(){this.request=k.createRequest(),this.request.addEventListener("load",this),this.request.addEventListener("error",this),this.request.open("GET",this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType("application/xml"),this.request.send(null)},l.onXMLLoaded=function(){var a=this.baseUrl+this.request.responseXML.getElementsByTagName("page")[0].attributes.getNamedItem("file").nodeValue,b=new f(a,this.crossorigin);this.texture=b.texture.baseTexture;var c={},d=this.request.responseXML.getElementsByTagName("info")[0],e=this.request.responseXML.getElementsByTagName("common")[0];c.font=d.attributes.getNamedItem("face").nodeValue,c.size=parseInt(d.attributes.getNamedItem("size").nodeValue,10),c.lineHeight=parseInt(e.attributes.getNamedItem("lineHeight").nodeValue,10),c.chars={};for(var h=this.request.responseXML.getElementsByTagName("char"),k=0;k<h.length;k++){var l=parseInt(h[k].attributes.getNamedItem("id").nodeValue,10),m=new g(parseInt(h[k].attributes.getNamedItem("x").nodeValue,10),parseInt(h[k].attributes.getNamedItem("y").nodeValue,10),parseInt(h[k].attributes.getNamedItem("width").nodeValue,10),parseInt(h[k].attributes.getNamedItem("height").nodeValue,10));c.chars[l]={xOffset:parseInt(h[k].attributes.getNamedItem("xoffset").nodeValue,10),yOffset:parseInt(h[k].attributes.getNamedItem("yoffset").nodeValue,10),xAdvance:parseInt(h[k].attributes.getNamedItem("xadvance").nodeValue,10),kerning:{},texture:j.cache[l]=new j(this.texture,m)}}var n=this.request.responseXML.getElementsByTagName("kerning");for(k=0;k<n.length;k++){var o=parseInt(n[k].attributes.getNamedItem("first").nodeValue,10),p=parseInt(n[k].attributes.getNamedItem("second").nodeValue,10),q=parseInt(n[k].attributes.getNamedItem("amount").nodeValue,10);c.chars[p].kerning[o]=q}i.fonts[c.font]=c;var r=this;b.addEventListener("loaded",function(){r.onLoaded()}),b.load()},l.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},l.onError=function(){this.dispatchEvent({type:"error",content:this})},e.registerLoaderType("xml",d),e.registerLoaderType("fnt",d),b.exports=d},{"../events/EventTarget":9,"../geom/Rectangle":36,"../platform":45,"../text/BitmapText":59,"../textures/Texture":63,"./AssetLoader":39,"./ImageLoader":41}],41:[function(a,b,c){"use strict";function d(a,b){f.call(this),this.texture=g.fromImage(a,b),this.frames=[]}var e=a("./AssetLoader"),f=a("../events/EventTarget"),g=a("../textures/Texture"),h=d.prototype;h.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var a=this;this.texture.baseTexture.addEventListener("loaded",function(){a.onLoaded()})}},h.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},h.loadFramedSpriteSheet=function(a,b,c){this.frames=[];for(var d=Math.floor(this.texture.width/a),e=Math.floor(this.texture.height/b),f=0,h=0;e>h;h++)for(var i=0;d>i;i++,f++){var j=new g(this.texture,{x:i*a,y:h*b,width:a,height:b});this.frames.push(j),c&&(g.cache[c+"-"+f]=j)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var k=this;this.texture.baseTexture.addEventListener("loaded",function(){k.onLoaded()})}},e.registerLoaderType("jpg",d),e.registerLoaderType("jpeg",d),e.registerLoaderType("png",d),e.registerLoaderType("gif",d),b.exports=d},{"../events/EventTarget":9,"../textures/Texture":63,"./AssetLoader":39}],42:[function(a,b,c){"use strict";function d(a,b){g.call(this),this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.loaded=!1}var e=a("./AssetLoader"),f=a("./ImageLoader"),g=a("../events/EventTarget"),h=a("../textures/Texture"),i=a("../extras/Spine"),j=a("../utils/spine").SkeletonJson,k=a("../platform"),l=d.prototype;l.handleEvent=function(a){switch(a.type){case"load":this.onJSONLoaded();break;default:this.onError()}},l.load=function(){this.request=k.createRequest(),this.request.addEventListener("load",this),this.request.addEventListener("error",this),this.request.open("GET",this.url,!0),this.request.overrideMimeType&&this.request.overrideMimeType("application/json"),this.request.send(null)},l.onJSONLoaded=function(){if(this.json=JSON.parse(this.request.responseText),this.json.frames){var a=this,b=this.baseUrl+this.json.meta.image,c=new f(b,this.crossorigin),d=this.json.frames;this.texture=c.texture.baseTexture,c.addEventListener("loaded",function(){a.onLoaded()});for(var e in d){var g=d[e].frame;g&&(h.cache[e]=new h(this.texture,{x:g.x,y:g.y,width:g.w,height:g.h}),d[e].trimmed&&(h.cache[e].realSize=d[e].spriteSourceSize,h.cache[e].trim.x=0))}c.load()}else if(this.json.bones){var k=new j,l=k.readSkeletonData(this.json);i.animCache[this.url]=l,this.onLoaded()}else this.onLoaded()},l.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},l.onError=function(){this.dispatchEvent({type:"error",content:this})},e.registerLoaderType("json",d),b.exports=d},{"../events/EventTarget":9,"../extras/Spine":12,"../platform":45,"../textures/Texture":63,"../utils/spine":69,"./AssetLoader":39,"./ImageLoader":41}],43:[function(a,b,c){"use strict";function d(a,b){g.call(this),this.url=a,this.crossorigin=b,this.loaded=!1}var e=a("./AssetLoader"),f=a("./JsonLoader"),g=a("../events/EventTarget"),h=a("../extras/Spine"),i=a("../utils/spine").SkeletonJson,j=d.prototype;j.load=function(){var a=this,b=new f(this.url,this.crossorigin);b.addEventListener("loaded",function(b){a.json=b.content.json,a.onJSONLoaded()}),b.load()},j.onJSONLoaded=function(){var a=new i,b=a.readSkeletonData(this.json);h.animCache[this.url]=b,this.onLoaded()},j.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},e.registerLoaderType("anim",d),b.exports=d},{"../events/EventTarget":9,"../extras/Spine":12,"../utils/spine":69,"./AssetLoader":39,"./JsonLoader":42}],44:[function(a,b,c){"use strict";function d(a,b){g.call(this),this.url=a,this.crossorigin=b,this.baseUrl=a.replace(/[^\/]*$/,""),this.texture=null,this.frames={}}var e=a("./JsonLoader"),f=a("./ImageLoader"),g=a("../events/EventTarget"),h=a("../textures/Texture"),i=d.prototype;i.load=function(){var a=this,b=new e(this.url,this.crossorigin);b.addEventListener("loaded",function(b){a.json=b.content.json,a.onJSONLoaded()}),b.load()},i.onJSONLoaded=function(){var a=this,b=this.baseUrl+this.json.meta.image,c=new f(b,this.crossorigin),d=this.json.frames;this.texture=c.texture.baseTexture,c.addEventListener("loaded",function(){a.onLoaded()});for(var e in d){var g=d[e].frame;g&&(h.cache[e]=new h(this.texture,{x:g.x,y:g.y,width:g.w,height:g.h}),d[e].trimmed&&(h.cache[e].realSize=d[e].spriteSourceSize,h.cache[e].trim.x=0))}c.load()},i.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},b.exports=d},{"../events/EventTarget":9,"../textures/Texture":63,"./ImageLoader":41,"./JsonLoader":42}],45:[function(a,c,d){(function(a){!function(a){"use strict";c.exports={global:a,console:a.console,document:a.document,location:a.location,navigator:a.navigator,window:a.window,createCanvas:function(){return a.document.createElement("canvas")},createImage:function(){return new a.Image},createRequest:function(){return new a.XMLHttpRequest}}}("undefined"!=typeof a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,"undefined"!=typeof b?b:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(a,b,c){"use strict";function d(){e.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.currentPath={points:[]}}var e=a("../display/DisplayObjectContainer"),f=a("../geom/Rectangle"),g=d.prototype=Object.create(e.prototype,{constructor:{value:d}});g.lineStyle=function(a,b,c){this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=arguments.length<3?1:c,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.POLY},this.graphicsData.push(this.currentPath)},g.moveTo=function(a,b){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:d.POLY},this.currentPath.points.push(a,b),this.graphicsData.push(this.currentPath)},g.lineTo=function(a,b){this.currentPath.points.push(a,b),this.dirty=!0},g.beginFill=function(a,b){this.filling=!0,this.fillColor=a||0,this.fillAlpha=arguments.length<2?1:b},g.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},g.drawRect=function(a,b,c,e){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,c,e],type:d.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},g.drawCircle=function(a,b,c){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,c,c],type:d.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},g.drawElipse=function(a,b,c,e){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[a,b,c,e],type:d.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},g.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},g.updateFilterBounds=function(){if(!this.bounds){for(var a,b,c,e=1/0,g=-(1/0),h=1/0,i=-(1/0),j=0;j<this.graphicsData.length;j++){var k=this.graphicsData[j],l=k.type,m=k.lineWidth;if(a=k.points,l===d.RECT){b=a.x-m/2,c=a.y-m/2;var n=a.width+m,o=a.height+m;e=e>b?b:e,g=b+n>g?b+n:g,h=h>c?b:h,i=c+o>i?c+o:i}else if(l===d.CIRC||l===d.ELIP){b=a.x,c=a.y;var p=a.radius+m/2;e=e>b-p?b-p:e,g=b+p>g?b+p:g,h=h>c-p?c-p:h,i=c+p>i?c+p:i}else for(var q=0;q<a.length;q+=2)b=a[q],c=a[q+1],e=e>b-m?b-m:e,g=b+m>g?b+m:g,h=h>c-m?c-m:h,i=c+m>i?c+m:i}this.bounds=new f(e,h,g-e,i-h)}},d.POLY=0,d.RECT=1,d.CIRC=2,d.ELIP=3,b.exports=d},{"../display/DisplayObjectContainer":4,"../geom/Rectangle":36}],47:[function(a,b,c){"use strict";function d(a,b,c,d){this.transparent=d,this.width=a||800,this.height=b||600,this.view=c||e.createCanvas(),this.context=this.view.getContext("2d"),this.smoothProperty=null,"imageSmoothingEnabled"in this.context?this.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.smoothProperty="oImageSmoothingEnabled"),this.scaleMode=null,this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0}var e=a("../../platform"),f=a("../../core/globals"),g=a("./graphics"),h=a("../../textures/BaseTexture"),i=a("../../textures/Texture"),j=a("../../display/Sprite"),k=a("../../extras/TilingSprite"),l=a("../../extras/Strip"),m=a("../../extras/CustomRenderable"),n=a("../../primitives/Graphics"),o=a("../../filters/FilterBlock"),p=d.prototype;p.render=function(a){f.texturesToUpdate=[],f.texturesToDestroy=[],f.visibleCount++,a.updateTransform(),this.view.style.backgroundColor===a.backgroundColorString||this.transparent||(this.view.style.backgroundColor=a.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(a),a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this))),i.frameUpdates.length>0&&(i.frameUpdates=[])},p.resize=function(a,b){this.width=a,this.height=b,this.view.width=a,this.view.height=b},p.renderDisplayObject=function(a){var b,c=this.context;c.globalCompositeOperation="source-over";var d=a.last._iNext;a=a.first;do if(b=a.worldTransform,a.visible)if(a.renderable){if(a instanceof j){var e=a.texture.frame;e&&e.width&&e.height&&a.texture.baseTexture.source&&(c.globalAlpha=a.worldAlpha,c.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]),this.smoothProperty&&this.scaleMode!==a.texture.baseTexture.scaleMode&&(this.scaleMode=a.texture.baseTexture.scaleMode,c[this.smoothProperty]=this.scaleMode===h.SCALE_MODE.LINEAR),c.drawImage(a.texture.baseTexture.source,e.x,e.y,e.width,e.height,a.anchor.x*-e.width,a.anchor.y*-e.height,e.width,e.height))}else if(a instanceof l)c.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]),this.renderStrip(a);else if(a instanceof k)c.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]),this.renderTilingSprite(a);else if(a instanceof m)c.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]),a.renderCanvas(this);else if(a instanceof n)c.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]),g.renderGraphics(a,c);else if(a instanceof o&&a.data instanceof n){var f=a.data;if(a.open){c.save();var i=f.alpha,p=f.worldTransform;c.setTransform(p[0],p[3],p[1],p[4],p[2],p[5]),
f.worldAlpha=.5,c.worldAlpha=0,g.renderGraphicsMask(f,c),c.clip(),f.worldAlpha=i}else c.restore()}a=a._iNext}else a=a._iNext;else a=a.last._iNext;while(a!==d)},p.renderStripFlat=function(a){var b=this.context,c=a.verticies,d=c.length/2;this.count++,b.beginPath();for(var e=1;d-2>e;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},p.renderTilingSprite=function(a){var b=this.context;b.globalAlpha=a.worldAlpha,a.__tilePattern||(a.__tilePattern=b.createPattern(a.texture.baseTexture.source,"repeat")),b.beginPath();var c=a.tilePosition,d=a.tileScale;b.scale(d.x,d.y),b.translate(c.x,c.y),b.fillStyle=a.__tilePattern,b.fillRect(-c.x,-c.y,a.width/d.x,a.height/d.y),b.scale(1/d.x,1/d.y),b.translate(-c.x,-c.y),b.closePath()},p.renderStrip=function(a){var b=this.context,c=a.verticies,d=a.uvs,e=c.length/2;this.count++;for(var f=1;e-2>f;f++){var g=2*f,h=c[g],i=c[g+2],j=c[g+4],k=c[g+1],l=c[g+3],m=c[g+5],n=d[g]*a.texture.width,o=d[g+2]*a.texture.width,p=d[g+4]*a.texture.width,q=d[g+1]*a.texture.height,r=d[g+3]*a.texture.height,s=d[g+5]*a.texture.height;b.save(),b.beginPath(),b.moveTo(h,k),b.lineTo(i,l),b.lineTo(j,m),b.closePath(),b.clip();var t=n*r+q*p+o*s-r*p-q*o-n*s,u=h*r+q*j+i*s-r*j-q*i-h*s,v=n*i+h*p+o*j-i*p-h*o-n*j,w=n*r*j+q*i*p+h*o*s-h*r*p-q*o*j-n*i*s,x=k*r+q*m+l*s-r*m-q*l-k*s,y=n*l+k*p+o*m-l*p-k*o-n*m,z=n*r*m+q*l*p+k*o*s-k*r*p-q*o*m-n*l*s;b.transform(u/t,x/t,v/t,y/t,w/t,z/t),b.drawImage(a.texture.baseTexture.source,0,0),b.restore()}},b.exports=d},{"../../core/globals":2,"../../display/Sprite":6,"../../extras/CustomRenderable":10,"../../extras/Strip":13,"../../extras/TilingSprite":14,"../../filters/FilterBlock":24,"../../platform":45,"../../primitives/Graphics":46,"../../textures/BaseTexture":61,"../../textures/Texture":63,"./graphics":48}],48:[function(a,b,c){"use strict";var d=a("../../platform"),e=a("../../primitives/Graphics");c.renderGraphics=function(a,b){for(var c,d,f,g,h=a.worldAlpha,i="",j=0,k=a.graphicsData.length;k>j;j++)if(c=a.graphicsData[j],d=c.points,i=b.strokeStyle="#"+("00000"+(0|c.lineColor).toString(16)).substr(-6),b.lineWidth=c.lineWidth,c.type===e.POLY){for(b.beginPath(),b.moveTo(d[0],d[1]),f=1,g=d.length/2;g>f;f++)b.lineTo(d[2*f],d[2*f+1]);d[0]===d[d.length-2]&&d[1]===d[d.length-1]&&b.closePath(),c.fill&&(b.globalAlpha=c.fillAlpha*h,b.fillStyle=i="#"+("00000"+(0|c.fillColor).toString(16)).substr(-6),b.fill()),c.lineWidth&&(b.globalAlpha=c.lineAlpha*h,b.stroke())}else if(c.type===e.RECT)(c.fillColor||0===c.fillColor)&&(b.globalAlpha=c.fillAlpha*h,b.fillStyle=i="#"+("00000"+(0|c.fillColor).toString(16)).substr(-6),b.fillRect(d[0],d[1],d[2],d[3])),c.lineWidth&&(b.globalAlpha=c.lineAlpha*h,b.strokeRect(d[0],d[1],d[2],d[3]));else if(c.type===e.CIRC)b.beginPath(),b.arc(d[0],d[1],d[2],0,2*Math.PI),b.closePath(),c.fill&&(b.globalAlpha=c.fillAlpha*h,b.fillStyle=i="#"+("00000"+(0|c.fillColor).toString(16)).substr(-6),b.fill()),c.lineWidth&&(b.globalAlpha=c.lineAlpha*h,b.stroke());else if(c.type===e.ELIP){var l=c.points,m=2*l[2],n=2*l[3],o=l[0]-m/2,p=l[1]-n/2;b.beginPath();var q=.5522848,r=m/2*q,s=n/2*q,t=o+m,u=p+n,v=o+m/2,w=p+n/2;b.moveTo(o,w),b.bezierCurveTo(o,w-s,v-r,p,v,p),b.bezierCurveTo(v+r,p,t,w-s,t,w),b.bezierCurveTo(t,w+s,v+r,u,v,u),b.bezierCurveTo(v-r,u,o,w+s,o,w),b.closePath(),c.fill&&(b.globalAlpha=c.fillAlpha*h,b.fillStyle=i="#"+("00000"+(0|c.fillColor).toString(16)).substr(-6),b.fill()),c.lineWidth&&(b.globalAlpha=c.lineAlpha*h,b.stroke())}},c.renderGraphicsMask=function(a,b){var c=a.graphicsData.length;if(0!==c){c>1&&(c=1,d.console.warn("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var f=0;1>f;f++){var g=a.graphicsData[f],h=g.points;if(g.type===e.POLY){b.beginPath(),b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(g.type===e.RECT)b.beginPath(),b.rect(h[0],h[1],h[2],h[3]),b.closePath();else if(g.type===e.CIRC)b.beginPath(),b.arc(h[0],h[1],h[2],0,2*Math.PI),b.closePath();else if(g.type===e.ELIP){var j=g.points,k=2*j[2],l=2*j[3],m=j[0]-k/2,n=j[1]-l/2;b.beginPath();var o=.5522848,p=k/2*o,q=l/2*o,r=m+k,s=n+l,t=m+k/2,u=n+l/2;b.moveTo(m,u),b.bezierCurveTo(m,u-q,t-p,n,t,n),b.bezierCurveTo(t+p,n,r,u-q,r,u),b.bezierCurveTo(r,u+q,t+p,s,t,s),b.bezierCurveTo(t-p,s,m,u+q,m,u),b.closePath()}}}}},{"../../platform":45,"../../primitives/Graphics":46}],49:[function(a,b,c){"use strict";function d(){this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"],this.textureCount=0}var e=a("./compile"),f=a("../../core/globals"),g=d.prototype;g.init=function(){var a=f.gl,b=e.program(a,this.vertexSrc||d.defaultVertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.dimensions=a.getUniformLocation(b,"dimensions"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord");for(var c in this.uniforms)this.uniforms[c].uniformLocation=a.getUniformLocation(b,c);this.initUniforms(),this.program=b},g.initUniforms=function(){this.textureCount=1;var a;for(var b in this.uniforms){a=this.uniforms[b];var c=a.type;"sampler2D"===c?(a._init=!1,null!==a.value&&this.initSampler2D(a)):"mat2"===c||"mat3"===c||"mat4"===c?(a.glMatrix=!0,a.glValueLength=1,"mat2"===c?a.glFunc=f.gl.uniformMatrix2fv:"mat3"===c?a.glFunc=f.gl.uniformMatrix3fv:"mat4"===c&&(a.glFunc=f.gl.uniformMatrix4fv)):(a.glFunc=f.gl["uniform"+c],"2f"===c||"2i"===c?a.glValueLength=2:"3f"===c||"3i"===c?a.glValueLength=3:"4f"===c||"4i"===c?a.glValueLength=4:a.glValueLength=1)}},g.initSampler2D=function(a){if(a.value&&a.value.baseTexture&&a.value.baseTexture.hasLoaded){if(f.gl.activeTexture(f.gl["TEXTURE"+this.textureCount]),f.gl.bindTexture(f.gl.TEXTURE_2D,a.value.baseTexture._glTexture),a.textureData){var b=a.textureData,c=b.magFilter?b.magFilter:f.gl.LINEAR,d=b.minFilter?b.minFilter:f.gl.LINEAR,e=b.wrapS?b.wrapS:f.gl.CLAMP_TO_EDGE,g=b.wrapT?b.wrapT:f.gl.CLAMP_TO_EDGE,h=b.luminance?f.gl.LUMINANCE:f.gl.RGBA;if(b.repeat&&(e=f.gl.REPEAT,g=f.gl.REPEAT),f.gl.pixelStorei(f.gl.UNPACK_FLIP_Y_WEBGL,!1),b.width){var i=b.width?b.width:512,j=b.height?b.height:2,k=b.border?b.border:0;f.gl.texImage2D(f.gl.TEXTURE_2D,0,h,i,j,k,h,f.gl.UNSIGNED_BYTE,null)}else f.gl.texImage2D(f.gl.TEXTURE_2D,0,h,f.gl.RGBA,f.gl.UNSIGNED_BYTE,a.value.baseTexture.source);f.gl.texParameteri(f.gl.TEXTURE_2D,f.gl.TEXTURE_MAG_FILTER,c),f.gl.texParameteri(f.gl.TEXTURE_2D,f.gl.TEXTURE_MIN_FILTER,d),f.gl.texParameteri(f.gl.TEXTURE_2D,f.gl.TEXTURE_WRAP_S,e),f.gl.texParameteri(f.gl.TEXTURE_2D,f.gl.TEXTURE_WRAP_T,g)}f.gl.uniform1i(a.uniformLocation,this.textureCount),a._init=!0,this.textureCount++}},g.syncUniforms=function(){this.textureCount=1;var a;for(var b in this.uniforms)a=this.uniforms[b],1===a.glValueLength?a.glMatrix===!0?a.glFunc.call(f.gl,a.uniformLocation,a.transpose,a.value):a.glFunc.call(f.gl,a.uniformLocation,a.value):2===a.glValueLength?a.glFunc.call(f.gl,a.uniformLocation,a.value.x,a.value.y):3===a.glValueLength?a.glFunc.call(f.gl,a.uniformLocation,a.value.x,a.value.y,a.value.z):4===a.glValueLength?a.glFunc.call(f.gl,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w):"sampler2D"===a.type&&(a._init?(f.gl.activeTexture(f.gl["TEXTURE"+this.textureCount]),f.gl.bindTexture(f.gl.TEXTURE_2D,a.value.baseTexture._glTexture),f.gl.uniform1i(a.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(a))},d.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],b.exports=d},{"../../core/globals":2,"./compile":56}],50:[function(a,b,c){"use strict";function d(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor  * alpha;","}"]}var e=a("./compile"),f=a("../../core/globals");d.prototype.init=function(){var a=f.gl,b=e.program(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},b.exports=d},{"../../core/globals":2,"./compile":56}],51:[function(a,b,c){"use strict";function d(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","varying vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]}var e=a("./compile"),f=a("../../core/globals");d.prototype.init=function(){var a=f.gl,b=e.program(a,this.vertexSrc,this.fragmentSrc);a.useProgram(b),this.uSampler=a.getUniformLocation(b,"uSampler"),this.projectionVector=a.getUniformLocation(b,"projectionVector"),this.offsetVector=a.getUniformLocation(b,"offsetVector"),this.colorAttribute=a.getAttribLocation(b,"aColor"),this.aVertexPosition=a.getAttribLocation(b,"aVertexPosition"),this.aTextureCoord=a.getAttribLocation(b,"aTextureCoord"),this.translationMatrix=a.getUniformLocation(b,"translationMatrix"),this.alpha=a.getUniformLocation(b,"alpha"),this.program=b},b.exports=d},{"../../core/globals":2,"./compile":56}],52:[function(a,b,c){"use strict";function d(a){this.gl=a,this.size=0,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.colorBuffer=a.createBuffer(),this.blendMode=f.NORMAL,this.dynamicSize=1}var e=a("../../core/globals"),f=a("../../display/blendModes"),g=d.prototype;g.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head=null,this.tail=null},g.restoreLostContext=function(a){this.gl=a,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.colorBuffer=a.createBuffer()},g.init=function(a){a.batch=this,this.dirty=!0,this.blendMode=a.blendMode,this.texture=a.texture.baseTexture,this.head=a,this.tail=a,this.size=1,this.growBatch()},g.insertBefore=function(a,b){this.size++,a.batch=this,this.dirty=!0;var c=b.__prev;b.__prev=a,a.__next=b,c?(a.__prev=c,c.__next=a):this.head=a},g.insertAfter=function(a,b){this.size++,a.batch=this,this.dirty=!0;var c=b.__next;b.__next=a,a.__prev=b,c?(a.__next=c,c.__prev=a):this.tail=a},g.remove=function(a){return this.size--,this.size?(a.__prev?a.__prev.__next=a.__next:(this.head=a.__next,this.head.__prev=null),a.__next?a.__next.__prev=a.__prev:(this.tail=a.__prev,this.tail.__next=null),a.batch=null,a.__next=null,a.__prev=null,void(this.dirty=!0)):(a.batch=null,a.__prev=null,void(a.__next=null))},g.split=function(a){this.dirty=!0;var b=new d(this.gl);b.init(a),b.texture=this.texture,b.tail=this.tail,this.tail=a.__prev,this.tail.__next=null,a.__prev=null;for(var c=0;a;)c++,a.batch=b,a=a.__next;return b.size=c,this.size-=c,b},g.merge=function(a){this.dirty=!0,this.tail.__next=a.head,a.head.__prev=this.tail,this.size+=a.size,this.tail=a.tail;for(var b=a.head;b;)b.batch=this,b=b.__next},g.growBatch=function(){var a=this.gl;1===this.size?this.dynamicSize=1:this.dynamicSize=1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.verticies,a.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),a.bufferData(a.ARRAY_BUFFER,this.uvs,a.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer),a.bufferData(a.ARRAY_BUFFER,this.colors,a.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var b=0,c=this.indices.length/6;c>b;b++){var d=6*b,e=4*b;this.indices[d+0]=e+0,this.indices[d+1]=e+1,this.indices[d+2]=e+2,this.indices[d+3]=e+0,this.indices[d+4]=e+2,this.indices[d+5]=e+3}a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW)},g.refresh=function(){this.dynamicSize<this.size&&this.growBatch();for(var a,b,c=0,d=this.head;d;){a=8*c;var e=d.texture,f=e.frame,g=e.baseTexture.width,h=e.baseTexture.height;this.uvs[a+0]=f.x/g,this.uvs[a+1]=f.y/h,this.uvs[a+2]=(f.x+f.width)/g,this.uvs[a+3]=f.y/h,this.uvs[a+4]=(f.x+f.width)/g,this.uvs[a+5]=(f.y+f.height)/h,this.uvs[a+6]=f.x/g,this.uvs[a+7]=(f.y+f.height)/h,d.updateFrame=!1,b=4*c,this.colors[b]=this.colors[b+1]=this.colors[b+2]=this.colors[b+3]=d.worldAlpha,d=d.__next,c++}this.dirtyUVS=!0,this.dirtyColors=!0},g.update=function(){for(var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r=0,s=this.head,t=this.verticies,u=this.uvs,v=this.colors;s;){if(s.vcount===e.visibleCount){if(b=s.texture.frame.width,c=s.texture.frame.height,d=s.anchor.x,f=s.anchor.y,g=b*(1-d),h=b*-d,i=c*(1-f),j=c*-f,k=8*r,a=s.worldTransform,l=a[0],m=a[3],n=a[1],o=a[4],p=a[2],q=a[5],t[k+0]=l*h+n*j+p,t[k+1]=o*j+m*h+q,t[k+2]=l*g+n*j+p,t[k+3]=o*j+m*g+q,t[k+4]=l*g+n*i+p,t[k+5]=o*i+m*g+q,t[k+6]=l*h+n*i+p,t[k+7]=o*i+m*h+q,s.updateFrame||s.texture.updateFrame){this.dirtyUVS=!0;var w=s.texture,x=w.frame,y=w.baseTexture.width,z=w.baseTexture.height;u[k+0]=x.x/y,u[k+1]=x.y/z,u[k+2]=(x.x+x.width)/y,u[k+3]=x.y/z,u[k+4]=(x.x+x.width)/y,u[k+5]=(x.y+x.height)/z,u[k+6]=x.x/y,u[k+7]=(x.y+x.height)/z,s.updateFrame=!1}if(s.cacheAlpha!==s.worldAlpha){s.cacheAlpha=s.worldAlpha;var A=4*r;v[A]=v[A+1]=v[A+2]=v[A+3]=s.worldAlpha,this.dirtyColors=!0}}else k=8*r,t[k+0]=t[k+1]=t[k+2]=t[k+3]=t[k+4]=t[k+5]=t[k+6]=t[k+7]=0;r++,s=s.__next}},g.render=function(a,b){if(a=a||0,arguments.length<2&&(b=this.size),this.dirty&&(this.refresh(),this.dirty=!1),this.size){this.update();var c=this.gl,d=e.defaultShader;c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,this.verticies),c.vertexAttribPointer(d.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,c.bufferSubData(c.ARRAY_BUFFER,0,this.uvs)),c.vertexAttribPointer(d.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,this.texture._glTexture),c.bindBuffer(c.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,c.bufferSubData(c.ARRAY_BUFFER,0,this.colors)),c.vertexAttribPointer(d.colorAttribute,1,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var f=b-a;c.drawElements(c.TRIANGLES,6*f,c.UNSIGNED_SHORT,2*a*6)}};var h=[];d.restoreBatches=function(a){for(var b=0,c=h.length;c>b;b++)h[b].restoreLostContext(a)},d.getBatch=function(){return h.length?h.pop():new d(e.gl)},d.returnBatch=function(a){a.clean(),h.push(a)},b.exports=d},{"../../core/globals":2,"../../display/blendModes":8}],53:[function(a,b,c){"use strict";function d(a,b){var c=f.gl;this.frameBuffer=c.createFramebuffer(),this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindFramebuffer(c.FRAMEBUFFER,this.framebuffer),c.bindFramebuffer(c.FRAMEBUFFER,this.frameBuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.texture,0),this.resize(a,b)}function e(a){this.transparent=a,this.filterStack=[],this.texturePool=[],this.offsetX=0,this.offsetY=0,this.initShaderBuffers()}var f=a("../../core/globals"),g=a("../../display/Sprite"),h=a("../../primitives/Graphics"),i=a("./PixiShader");d.prototype.resize=function(a,b){if(this.width!==a||this.height!==b){this.width=a,this.height=b;var c=f.gl;c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null)}};var j=e.prototype;j.begin=function(a,b){this.width=2*a.x,this.height=2*-a.y,this.buffer=b},j.pushFilter=function(a){var b=f.gl;this.filterStack.push(a);var c=a.filterPasses[0];this.offsetX+=a.target.filterArea.x,this.offsetY+=a.target.filterArea.y;var e=this.texturePool.pop();e?e.resize(this.width,this.height):e=new d(this.width,this.height),b.bindTexture(b.TEXTURE_2D,e.texture),this.getBounds(a.target);var g=a.target.filterArea,h=c.padding;g.x-=h,g.y-=h,g.width+=2*h,g.height+=2*h,g.x<0&&(g.x=0),g.width>this.width&&(g.width=this.width),g.y<0&&(g.y=0),g.height>this.height&&(g.height=this.height),b.bindFramebuffer(b.FRAMEBUFFER,e.frameBuffer),b.viewport(0,0,g.width,g.height),f.projection.x=g.width/2,f.projection.y=-g.height/2,f.offset.x=-g.x,f.offset.y=-g.y,b.uniform2f(f.defaultShader.projectionVector,g.width/2,-g.height/2),b.uniform2f(f.defaultShader.offsetVector,-g.x,-g.y),b.colorMask(!0,!0,!0,!0),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),a._glFilterTexture=e},j.popFilter=function(){var a=f.gl,b=this.filterStack.pop(),c=b.target.filterArea,e=b._glFilterTexture;if(b.filterPasses.length>1){a.viewport(0,0,c.width,c.height),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=c.height,this.vertexArray[2]=c.width,this.vertexArray[3]=c.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=c.width,this.vertexArray[7]=0,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=c.width/this.width,this.uvArray[5]=c.height/this.height,this.uvArray[6]=c.width/this.width,this.uvArray[7]=c.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray);var g=e,h=this.texturePool.pop();h||(h=new d(this.width,this.height)),a.bindFramebuffer(a.FRAMEBUFFER,h.frameBuffer),a.clear(a.COLOR_BUFFER_BIT),a.disable(a.BLEND);for(var i=0;i<b.filterPasses.length-1;i++){var j=b.filterPasses[i];a.bindFramebuffer(a.FRAMEBUFFER,h.frameBuffer),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,g.texture),this.applyFilterPass(j,c,c.width,c.height);var k=g;g=h,h=k}a.enable(a.BLEND),e=g,this.texturePool.push(h)}var l=b.filterPasses[b.filterPasses.length-1];this.offsetX-=c.x,this.offsetY-=c.y;var m=this.width,n=this.height,o=0,p=0,q=this.buffer;if(0===this.filterStack.length)a.colorMask(!0,!0,!0,this.transparent);else{var r=this.filterStack[this.filterStack.length-1];c=r.target.filterArea,m=c.width,n=c.height,o=c.x,p=c.y,q=r._glFilterTexture.frameBuffer}f.projection.x=m/2,f.projection.y=-n/2,f.offset.x=o,f.offset.y=p,c=b.target.filterArea;var s=c.x-o,t=c.y-p;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=s,this.vertexArray[1]=t+c.height,this.vertexArray[2]=s+c.width,this.vertexArray[3]=t+c.height,this.vertexArray[4]=s,this.vertexArray[5]=t,this.vertexArray[6]=s+c.width,this.vertexArray[7]=t,a.bufferSubData(a.ARRAY_BUFFER,0,this.vertexArray),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=c.width/this.width,this.uvArray[5]=c.height/this.height,this.uvArray[6]=c.width/this.width,this.uvArray[7]=c.height/this.height,a.bufferSubData(a.ARRAY_BUFFER,0,this.uvArray),a.viewport(0,0,m,n),a.bindFramebuffer(a.FRAMEBUFFER,q),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture),this.applyFilterPass(l,c,m,n),a.useProgram(f.defaultShader.program),a.uniform2f(f.defaultShader.projectionVector,m/2,-n/2),a.uniform2f(f.defaultShader.offsetVector,-o,-p),this.texturePool.push(e),b._glFilterTexture=null},j.applyFilterPass=function(a,b,c,d){var e=f.gl,g=a.shader;g||(g=new i,g.fragmentSrc=a.fragmentSrc,g.uniforms=a.uniforms,g.init(),a.shader=g),e.useProgram(g.program),e.uniform2f(g.projectionVector,c/2,-d/2),e.uniform2f(g.offsetVector,0,0),a.uniforms.dimensions&&(a.uniforms.dimensions.value[0]=this.width,a.uniforms.dimensions.value[1]=this.height,a.uniforms.dimensions.value[2]=this.vertexArray[0],a.uniforms.dimensions.value[3]=this.vertexArray[5]),g.syncUniforms(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.vertexAttribPointer(g.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.vertexAttribPointer(g.aTextureCoord,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)},j.initShaderBuffers=function(){var a=f.gl;this.vertexBuffer=a.createBuffer(),this.uvBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer),a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)},j.getBounds=function(a){var b,c,d,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=a.first,C=a.last._iNext,D=-(1/0),E=-(1/0),F=1/0,G=1/0;do{if(B.visible)if(B instanceof g)c=B.texture.frame.width,d=B.texture.frame.height,e=B.anchor.x,f=B.anchor.y,i=c*(1-e),j=c*-e,k=d*(1-f),l=d*-f,m=!0;else if(B instanceof h){B.updateFilterBounds();var H=B.bounds;c=H.width,d=H.height,i=H.x,j=H.x+H.width,k=H.y,l=H.y+H.height,m=!0}m&&(b=B.worldTransform,n=b[0],o=b[3],p=b[1],q=b[4],r=b[2],s=b[5],t=n*j+p*l+r,x=q*l+o*j+s,u=n*i+p*l+r,y=q*l+o*i+s,v=n*i+p*k+r,z=q*k+o*i+s,w=n*j+p*k+r,A=q*k+o*j+s,F=F>t?t:F,F=F>u?u:F,F=F>v?v:F,F=F>w?w:F,G=G>x?x:G,G=G>y?y:G,G=G>z?z:G,G=G>A?A:G,D=t>D?t:D,D=u>D?u:D,D=v>D?v:D,D=w>D?w:D,E=x>E?x:E,E=y>E?y:E,E=z>E?z:E,E=A>E?A:E),m=!1,B=B._iNext}while(B!==C);a.filterArea.x=F,a.filterArea.y=G,a.filterArea.width=D-F,a.filterArea.height=E-G},b.exports=e},{"../../core/globals":2,"../../display/Sprite":6,"../../primitives/Graphics":46,"./PixiShader":49}],54:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.root=null,this.backgroundColor=void 0,this.transparent=void 0===b?!0:b,this.batchs=[],this.toRemove=[],this.filterManager=new i(this.transparent)}var e=a("../../core/globals"),f=a("./shaders"),g=a("./graphics"),h=a("./WebGLBatch"),i=a("./WebGLFilterManager"),j=a("../../geom/matrix").mat3,k=a("../../textures/BaseTexture"),l=a("../../extras/TilingSprite"),m=a("../../extras/Strip"),n=a("../../primitives/Graphics"),o=a("../../filters/FilterBlock"),p=a("../../display/Sprite"),q=a("../../extras/CustomRenderable"),r=d.prototype;r.setRenderable=function(a){this.root&&this.removeDisplayObjectAndChildren(this.root),a.worldVisible=a.visible,this.root=a,this.addDisplayObjectAndChildren(a)},r.render=function(a,b){var c=this.gl;d.updateTextures(c),c.uniform2f(e.defaultShader.projectionVector,a.x,a.y),this.filterManager.begin(a,b),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);for(var f,g=0;g<this.batchs.length;g++)f=this.batchs[g],f instanceof h?this.batchs[g].render():this.renderSpecial(f,a)},r.handleFilter=function(){},r.renderSpecific=function(a,b,c){var f=this.gl;d.updateTextures(f),f.uniform2f(e.defaultShader.projectionVector,b.x,b.y),this.filterManager.begin(b,c);for(var g,i,j,k,l,m,n=a.first;n._iNext&&(!n.renderable||!n.__renderGroup);)n=n._iNext;var o=n.batch;if(n instanceof p)if(o=n.batch,m=o.head,m===n)g=0;else for(g=1;m.__next!==n;)g++,m=m.__next;else o=n;for(var q=a.last;q._iPrev&&(!q.renderable||!q.__renderGroup);)q=q._iNext;if(q instanceof p)if(l=q.batch,m=l.head,m===q)j=0;else for(j=1;m.__next!==q;)j++,m=m.__next;else l=q;if(o===l)return void(o instanceof h?o.render(g,j+1):this.renderSpecial(o,b));i=this.batchs.indexOf(o),k=this.batchs.indexOf(l),o instanceof h?o.render(g):this.renderSpecial(o,b);for(var r,s=i+1;k>s;s++)r=this.batchs[s],r instanceof h?this.batchs[s].render():this.renderSpecial(r,b);l instanceof h?l.render(0,j+1):this.renderSpecial(l,b)},r.renderSpecial=function(a,b){var c=a.vcount===e.visibleCount;a instanceof l?c&&this.renderTilingSprite(a,b):a instanceof m?c&&this.renderStrip(a,b):a instanceof q?c&&a.renderWebGL(this,b):a instanceof n?c&&a.renderable&&g.renderGraphics(a,b):a instanceof o&&this.handleFilterBlock(a,b)};var s=[];r.handleFilterBlock=function(a,b){var c=e.gl;if(a.open)a.data instanceof Array?this.filterManager.pushFilter(a):(s.push(a),c.enable(c.STENCIL_TEST),c.colorMask(!1,!1,!1,!1),c.stencilFunc(c.ALWAYS,1,1),c.stencilOp(c.KEEP,c.KEEP,c.INCR),g.renderGraphics(a.data,b),c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.NOTEQUAL,0,s.length),c.stencilOp(c.KEEP,c.KEEP,c.KEEP));else if(a.data instanceof Array)this.filterManager.popFilter();else{var d=s.pop(a);d&&(c.colorMask(!1,!1,!1,!1),c.stencilFunc(c.ALWAYS,1,1),c.stencilOp(c.KEEP,c.KEEP,c.DECR),g.renderGraphics(d.data,b),c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.NOTEQUAL,0,s.length),c.stencilOp(c.KEEP,c.KEEP,c.KEEP)),c.disable(c.STENCIL_TEST)}},r.updateTexture=function(a){this.removeObject(a);for(var b=a.first;b!==this.root&&(b=b._iPrev,!b.renderable||!b.__renderGroup););for(var c=a.last;c._iNext&&(c=c._iNext,!c.renderable||!c.__renderGroup););this.insertObject(a,b,c)},r.addFilterBlocks=function(a,b){a.__renderGroup=this,b.__renderGroup=this;for(var c=a;c!==this.root.first&&(c=c._iPrev,!c.renderable||!c.__renderGroup););this.insertAfter(a,c);for(var d=b;d!==this.root.first&&(d=d._iPrev,!d.renderable||!d.__renderGroup););this.insertAfter(b,d)},r.removeFilterBlocks=function(a,b){this.removeObject(a),this.removeObject(b)},r.addDisplayObjectAndChildren=function(a){a.__renderGroup&&a.__renderGroup.removeDisplayObjectAndChildren(a);for(var b=a.first;b!==this.root.first&&(b=b._iPrev,!b.renderable||!b.__renderGroup););for(var c=a.last;c._iNext&&(c=c._iNext,!c.renderable||!c.__renderGroup););var d=a.first,e=a.last._iNext;do d.__renderGroup=this,d.renderable&&(this.insertObject(d,b,c),b=d),d=d._iNext;while(d!==e)},r.removeDisplayObjectAndChildren=function(a){if(a.__renderGroup===this)do a.__renderGroup=null,a.renderable&&this.removeObject(a),a=a._iNext;while(a)},r.insertObject=function(a,b,c){var d,e,f=b,g=c;if(a instanceof p){var i,j;if(f instanceof p){if(i=f.batch,i&&i.texture===a.texture.baseTexture&&i.blendMode===a.blendMode)return void i.insertAfter(a,f)}else i=f;if(g)if(g instanceof p){if(j=g.batch){if(j.texture===a.texture.baseTexture&&j.blendMode===a.blendMode)return void j.insertBefore(a,g);if(j===i){var k=i.split(g);return d=h.getBatch(),e=this.batchs.indexOf(i),d.init(a),void this.batchs.splice(e+1,0,d,k)}}}else j=g;return d=h.getBatch(),d.init(a),void(i?(e=this.batchs.indexOf(i),this.batchs.splice(e+1,0,d)):this.batchs.push(d))}a instanceof l?this.initTilingSprite(a):a instanceof m&&this.initStrip(a),this.insertAfter(a,f)},r.insertAfter=function(a,b){var c,d,e;b instanceof p?(c=b.batch,c?c.tail===b?(e=this.batchs.indexOf(c),this.batchs.splice(e+1,0,a)):(d=c.split(b.__next),e=this.batchs.indexOf(c),this.batchs.splice(e+1,0,a,d)):this.batchs.push(a)):(e=this.batchs.indexOf(b),this.batchs.splice(e+1,0,a))},r.removeObject=function(a){var b,c;if(a instanceof p){var d=a.batch;if(!d)return;d.remove(a),d.size||(b=d)}else b=a;if(b){if(c=this.batchs.indexOf(b),-1===c)return;if(0===c||c===this.batchs.length-1)return this.batchs.splice(c,1),void(b instanceof h&&h.returnBatch(b));if(this.batchs[c-1]instanceof h&&this.batchs[c+1]instanceof h&&this.batchs[c-1].texture===this.batchs[c+1].texture&&this.batchs[c-1].blendMode===this.batchs[c+1].blendMode)return this.batchs[c-1].merge(this.batchs[c+1]),b instanceof h&&h.returnBatch(b),h.returnBatch(this.batchs[c+1]),void this.batchs.splice(c,2);this.batchs.splice(c,1),b instanceof h&&h.returnBatch(b)}},r.initTilingSprite=function(a){var b=this.gl;a.verticies=new Float32Array([0,0,a.width,0,a.width,a.height,0,a.height]),a.uvs=new Float32Array([0,0,1,0,1,1,0,1]),a.colors=new Float32Array([1,1,1,1]),a.indices=new Uint16Array([0,1,3,2]),a._vertexBuffer=b.createBuffer(),a._indexBuffer=b.createBuffer(),a._uvBuffer=b.createBuffer(),a._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,a.verticies,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer),b.bufferData(b.ARRAY_BUFFER,a.uvs,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW),a.texture.baseTexture._glTexture?(b.bindTexture(b.TEXTURE_2D,a.texture.baseTexture._glTexture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),a.texture.baseTexture._powerOf2=!0):a.texture.baseTexture._powerOf2=!0},r.renderStrip=function(a,b){var c=this.gl;f.activateStripShader();var d=e.stripShader,g=j.clone(a.worldTransform);j.transpose(g),c.uniformMatrix3fv(d.translationMatrix,!1,g),c.uniform2f(d.projectionVector,b.x,b.y),c.uniform2f(d.offsetVector,-e.offset.x,-e.offset.y),c.uniform1f(d.alpha,a.worldAlpha),a.dirty?(a.dirty=!1,c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferData(c.ARRAY_BUFFER,a.verticies,c.STATIC_DRAW),c.vertexAttribPointer(d.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.bufferData(c.ARRAY_BUFFER,a.uvs,c.STATIC_DRAW),c.vertexAttribPointer(d.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,a.texture.baseTexture._glTexture),c.bindBuffer(c.ARRAY_BUFFER,a._colorBuffer),c.bufferData(c.ARRAY_BUFFER,a.colors,c.STATIC_DRAW),c.vertexAttribPointer(d.colorAttribute,1,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW)):(c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,a.verticies),c.vertexAttribPointer(d.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.vertexAttribPointer(d.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,a.texture.baseTexture._glTexture),c.bindBuffer(c.ARRAY_BUFFER,a._colorBuffer),c.vertexAttribPointer(d.colorAttribute,1,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer)),c.drawElements(c.TRIANGLE_STRIP,a.indices.length,c.UNSIGNED_SHORT,0),f.deactivateStripShader()},r.renderTilingSprite=function(a,b){var c=this.gl,d=a.tilePosition,e=a.tileScale,f=d.x/a.texture.baseTexture.width,g=d.y/a.texture.baseTexture.height,h=a.width/a.texture.baseTexture.width/e.x,i=a.height/a.texture.baseTexture.height/e.y;a.uvs[0]=0-f,a.uvs[1]=0-g,a.uvs[2]=1*h-f,a.uvs[3]=0-g,
a.uvs[4]=1*h-f,a.uvs[5]=1*i-g,a.uvs[6]=0-f,a.uvs[7]=1*i-g,c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,a.uvs),this.renderStrip(a,b)},r.initStrip=function(a){var b=this.gl;a._vertexBuffer=b.createBuffer(),a._indexBuffer=b.createBuffer(),a._uvBuffer=b.createBuffer(),a._colorBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,a.verticies,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer),b.bufferData(b.ARRAY_BUFFER,a.uvs,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW)},d.updateTexture=function(a,b){b._glTexture||(b._glTexture=a.createTexture()),b.hasLoaded&&(a.bindTexture(a.TEXTURE_2D,b._glTexture),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.source),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b.scaleMode===k.SCALE_MODE.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.scaleMode===k.SCALE_MODE.LINEAR?a.LINEAR:a.NEAREST),b._powerOf2?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),a.bindTexture(a.TEXTURE_2D,null))},d.destroyTexture=function(a,b){b._glTexture&&(b._glTexture=a.createTexture(),a.deleteTexture(a.TEXTURE_2D,b._glTexture))},d.updateTextures=function(a){for(var b=0,c=e.texturesToUpdate.length;c>b;b++)d.updateTexture(a,e.texturesToUpdate[b]);for(b=0,c=e.texturesToDestroy.length;c>b;b++)d.destroyTexture(a,e.texturesToDestroy[b]);e.texturesToUpdate=[],e.texturesToDestroy=[]},b.exports=d},{"../../core/globals":2,"../../display/Sprite":6,"../../extras/CustomRenderable":10,"../../extras/Strip":13,"../../extras/TilingSprite":14,"../../filters/FilterBlock":24,"../../geom/matrix":37,"../../primitives/Graphics":46,"../../textures/BaseTexture":61,"./WebGLBatch":52,"./WebGLFilterManager":53,"./graphics":57,"./shaders":58}],55:[function(a,b,c){"use strict";function d(a,b,c,d,k){var l;this.transparent=!!d,this.width=a||800,this.height=b||600,this.view=c||e.createCanvas(),this.view.width=this.width,this.view.height=this.height;var m=this;this.view.addEventListener("webglcontextlost",function(a){m.handleContextLost(a)},!1),this.view.addEventListener("webglcontextrestored",function(a){m.handleContextRestored(a)},!1),this.batchs=[];var n={alpha:this.transparent,antialias:!!k,premultipliedAlpha:!1,stencil:!0};try{l=this.view.getContext("experimental-webgl",n)}catch(o){try{l=this.view.getContext("webgl",n)}catch(p){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}this.gl=f.gl=l,g.initDefaultShaders(),l.useProgram(f.defaultShader.program),this.batch=new h(l),l.disable(l.DEPTH_TEST),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.colorMask(!0,!0,!0,this.transparent),this.projection=f.projection=new j(400,300),this.offset=f.offset=new j(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.stageRenderGroup=new i(this.gl,this.transparent)}var e=a("../../platform"),f=a("../../core/globals"),g=a("./shaders"),h=a("./WebGLBatch"),i=a("./WebGLRenderGroup"),j=a("../../geom/Point"),k=a("../../textures/Texture"),l=d.prototype;l.render=function(a){if(!this.contextLost){this.__stage!==a&&(this.__stage=a,this.stageRenderGroup.setRenderable(a));var b=this.gl;if(i.updateTextures(b),f.visibleCount++,a.updateTransform(),b.colorMask(!0,!0,!0,this.transparent),b.viewport(0,0,this.width,this.height),b.bindFramebuffer(b.FRAMEBUFFER,null),b.clearColor(a.backgroundColorSplit[0],a.backgroundColorSplit[1],a.backgroundColorSplit[2],!this.transparent),b.clear(b.COLOR_BUFFER_BIT),this.stageRenderGroup.backgroundColor=a.backgroundColorSplit,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.stageRenderGroup.render(this.projection),a.interactive&&(a._interactiveEventsAdded||(a._interactiveEventsAdded=!0,a.interactionManager.setTarget(this))),k.frameUpdates.length>0){for(var c=0,d=k.frameUpdates.length;d>c;c++)k.frameUpdates[c].updateFrame=!1;k.frameUpdates=[]}}},l.resize=function(a,b){this.width=a,this.height=b,this.view.width=a,this.view.height=b,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},l.handleContextLost=function(a){a.preventDefault(),this.contextLost=!0},l.handleContextRestored=function(){var a=this.gl=this.view.getContext("experimental-webgl",{alpha:!0});this.initShaders();for(var b in k.cache){var c=k.cache[b].baseTexture;c._glTexture=null,i.updateTexture(a,c)}for(var d=0,e=this.batchs.length;e>d;d++)this.batchs[d].restoreLostContext(a),this.batchs[d].dirty=!0;h.restoreBatches(a),this.contextLost=!1},b.exports=d},{"../../core/globals":2,"../../geom/Point":34,"../../platform":45,"../../textures/Texture":63,"./WebGLBatch":52,"./WebGLRenderGroup":54,"./shaders":58}],56:[function(a,b,c){"use strict";var d=a("../../platform");c.shader=function(a,b,c){var e=b.join("\n"),f=a.createShader(c);return a.shaderSource(f,e),a.compileShader(f),a.getShaderParameter(f,a.COMPILE_STATUS)?f:(d.console&&d.console.error(a.getShaderInfoLog(f)),null)},c.program=function(a,b,e){var f=c.shader(a,e,a.FRAGMENT_SHADER),g=c.shader(a,b,a.VERTEX_SHADER),h=a.createProgram();return a.attachShader(h,g),a.attachShader(h,f),a.linkProgram(h),a.getProgramParameter(h,a.LINK_STATUS)?h:(d.console&&d.console.error("Could not initialise shaders"),null)}},{"../../platform":45}],57:[function(a,b,c){"use strict";var d=a("./shaders"),e=a("../../core/globals"),f=a("../../geom/matrix").mat3,g=a("../../utils/color").hex2rgb,h=a("../../utils/Polyk").triangulate,i=a("../../geom/Point"),j=a("../../primitives/Graphics");c.renderGraphics=function(a,b){var g=e.gl;a._webGL||(a._webGL={points:[],indices:[],lastIndex:0,buffer:g.createBuffer(),indexBuffer:g.createBuffer()}),a.dirty&&(a.dirty=!1,a.clearDirty&&(a.clearDirty=!1,a._webGL.lastIndex=0,a._webGL.points=[],a._webGL.indices=[]),c.updateGraphics(a)),d.activatePrimitiveShader();var h=f.clone(a.worldTransform);f.transpose(h),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.uniformMatrix3fv(e.primitiveShader.translationMatrix,!1,h),g.uniform2f(e.primitiveShader.projectionVector,b.x,-b.y),g.uniform2f(e.primitiveShader.offsetVector,-e.offset.x,-e.offset.y),g.uniform1f(e.primitiveShader.alpha,a.worldAlpha),g.bindBuffer(g.ARRAY_BUFFER,a._webGL.buffer),g.vertexAttribPointer(e.primitiveShader.aVertexPosition,2,g.FLOAT,!1,24,0),g.vertexAttribPointer(e.primitiveShader.colorAttribute,4,g.FLOAT,!1,24,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,a._webGL.indexBuffer),g.drawElements(g.TRIANGLE_STRIP,a._webGL.indices.length,g.UNSIGNED_SHORT,0),d.deactivatePrimitiveShader()},c.updateGraphics=function(a){for(var b=a._webGL.lastIndex;b<a.graphicsData.length;b++){var d=a.graphicsData[b];d.type===j.POLY?(d.fill&&d.points.length>3&&c.buildPoly(d,a._webGL),d.lineWidth>0&&c.buildLine(d,a._webGL)):d.type===j.RECT?c.buildRectangle(d,a._webGL):d.type===j.CIRC||d.type===j.ELIP,c.buildCircle(d,a._webGL)}a._webGL.lastIndex=a.graphicsData.length;var f=e.gl;a._webGL.glPoints=new Float32Array(a._webGL.points),f.bindBuffer(f.ARRAY_BUFFER,a._webGL.buffer),f.bufferData(f.ARRAY_BUFFER,a._webGL.glPoints,f.STATIC_DRAW),a._webGL.glIndicies=new Uint16Array(a._webGL.indices),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,a._webGL.indexBuffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,a._webGL.glIndicies,f.STATIC_DRAW)},c.buildRectangle=function(a,b){var d=a.points,e=d[0],f=d[1],h=d[2],i=d[3];if(a.fill){var j=g(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6;o.push(e,f),o.push(l,m,n,k),o.push(e+h,f),o.push(l,m,n,k),o.push(e,f+i),o.push(l,m,n,k),o.push(e+h,f+i),o.push(l,m,n,k),p.push(q,q,q+1,q+2,q+3,q+3)}a.lineWidth&&(a.points=[e,f,e+h,f,e+h,f+i,e,f+i,e,f],c.buildLine(a,b))},c.buildCircle=function(a,b){var d=a.points,e=d[0],f=d[1],h=d[2],i=d[3],j=40,k=2*Math.PI/j,l=0;if(a.fill){var m=g(a.fillColor),n=a.fillAlpha,o=m[0]*n,p=m[1]*n,q=m[2]*n,r=b.points,s=b.indices,t=r.length/6;for(s.push(t),l=0;j+1>l;l++)r.push(e,f,o,p,q,n),r.push(e+Math.sin(k*l)*h,f+Math.cos(k*l)*i,o,p,q,n),s.push(t++,t++);s.push(t-1)}if(a.lineWidth){for(a.points=[],l=0;j+1>l;l++)a.points.push(e+Math.sin(k*l)*h,f+Math.cos(k*l)*i);c.buildLine(a,b)}},c.buildLine=function(a,b){var c=0,d=a.points;if(0!==d.length){if(a.lineWidth%2)for(c=0;c<d.length;c++)d[c]+=.5;var e=new i(d[0],d[1]),f=new i(d[d.length-2],d[d.length-1]);if(e.x===f.x&&e.y===f.y){d.pop(),d.pop(),f=new i(d[d.length-2],d[d.length-1]);var h=f.x+.5*(e.x-f.x),j=f.y+.5*(e.y-f.y);d.unshift(h,j),d.push(h,j)}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=b.points,I=b.indices,J=d.length/2,K=d.length,L=H.length/6,M=a.lineWidth/2,N=g(a.lineColor),O=a.lineAlpha,P=N[0]*O,Q=N[1]*O,R=N[2]*O;for(m=d[0],n=d[1],o=d[2],p=d[3],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,H.push(m-s,n-t,P,Q,R,O),H.push(m+s,n+t,P,Q,R,O),c=1;J-1>c;c++)m=d[2*(c-1)],n=d[2*(c-1)+1],o=d[2*c],p=d[2*c+1],q=d[2*(c+1)],r=d[2*(c+1)+1],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,u=-(p-r),v=o-q,G=Math.sqrt(u*u+v*v),u/=G,v/=G,u*=M,v*=M,y=-t+n-(-t+p),z=-s+o-(-s+m),A=(-s+m)*(-t+p)-(-s+o)*(-t+n),B=-v+r-(-v+p),C=-u+o-(-u+q),D=(-u+q)*(-v+p)-(-u+o)*(-v+r),E=y*C-B*z,Math.abs(E)<.1?(E+=10.1,H.push(o-s,p-t,P,Q,R,O),H.push(o+s,p+t,P,Q,R,O)):(k=(z*D-C*A)/E,l=(B*A-y*D)/E,F=(k-o)*(k-o)+(l-p)+(l-p),F>19600?(w=s-u,x=t-v,G=Math.sqrt(w*w+x*x),w/=G,x/=G,w*=M,x*=M,H.push(o-w,p-x),H.push(P,Q,R,O),H.push(o+w,p+x),H.push(P,Q,R,O),H.push(o-w,p-x),H.push(P,Q,R,O),K++):(H.push(k,l),H.push(P,Q,R,O),H.push(o-(k-o),p-(l-p)),H.push(P,Q,R,O)));for(m=d[2*(J-2)],n=d[2*(J-2)+1],o=d[2*(J-1)],p=d[2*(J-1)+1],s=-(n-p),t=m-o,G=Math.sqrt(s*s+t*t),s/=G,t/=G,s*=M,t*=M,H.push(o-s,p-t),H.push(P,Q,R,O),H.push(o+s,p+t),H.push(P,Q,R,O),I.push(L),c=0;K>c;c++)I.push(L++);I.push(L-1)}},c.buildPoly=function(a,b){var c=a.points;if(!(c.length<6)){var d=b.points,e=b.indices,f=c.length/2,i=g(a.fillColor),j=a.fillAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=h(c),o=d.length/6,p=0;for(p=0;p<n.length;p+=3)e.push(n[p]+o),e.push(n[p]+o),e.push(n[p+1]+o),e.push(n[p+2]+o),e.push(n[p+2]+o);for(p=0;f>p;p++)d.push(c[2*p],c[2*p+1],k,l,m,j)}}},{"../../core/globals":2,"../../geom/Point":34,"../../geom/matrix":37,"../../primitives/Graphics":46,"../../utils/Polyk":64,"../../utils/color":66,"./shaders":58}],58:[function(a,b,c){"use strict";var d=a("../../core/globals"),e=a("./PrimitiveShader"),f=a("./StripShader"),g=a("./PixiShader");c.initDefaultShaders=function(){d.primitiveShader=new e,d.primitiveShader.init(),d.stripShader=new f,d.stripShader.init(),d.defaultShader=new g,d.defaultShader.init();var a=d.gl,b=d.defaultShader.program;a.useProgram(b),a.enableVertexAttribArray(d.defaultShader.aVertexPosition),a.enableVertexAttribArray(d.defaultShader.colorAttribute),a.enableVertexAttribArray(d.defaultShader.aTextureCoord)},c.activatePrimitiveShader=function(){var a=d.gl;a.useProgram(d.primitiveShader.program),a.disableVertexAttribArray(d.defaultShader.aVertexPosition),a.disableVertexAttribArray(d.defaultShader.colorAttribute),a.disableVertexAttribArray(d.defaultShader.aTextureCoord),a.enableVertexAttribArray(d.primitiveShader.aVertexPosition),a.enableVertexAttribArray(d.primitiveShader.colorAttribute)},c.deactivatePrimitiveShader=function(){var a=d.gl;a.useProgram(d.defaultShader.program),a.disableVertexAttribArray(d.primitiveShader.aVertexPosition),a.disableVertexAttribArray(d.primitiveShader.colorAttribute),a.enableVertexAttribArray(d.defaultShader.aVertexPosition),a.enableVertexAttribArray(d.defaultShader.colorAttribute),a.enableVertexAttribArray(d.defaultShader.aTextureCoord)},c.activateStripShader=function(){var a=d.gl;a.useProgram(d.stripShader.program)},c.deactivateStripShader=function(){var a=d.gl;a.useProgram(d.defaultShader.program)}},{"../../core/globals":2,"./PixiShader":49,"./PrimitiveShader":50,"./StripShader":51}],59:[function(a,b,c){"use strict";function d(a,b){e.call(this),this.setText(a),this.setStyle(b),this.updateText(),this.dirty=!1}var e=a("../display/DisplayObjectContainer"),f=a("../display/Sprite"),g=a("../geom/Point"),h=d.prototype=Object.create(e.prototype,{constructor:{value:d}});h.setText=function(a){this.text=a||" ",this.dirty=!0},h.setStyle=function(a){a=a||{},a.align=a.align||"left",this.style=a;var b=a.font.split(" ");this.fontName=b[b.length-1],this.fontSize=b.length>=2?parseInt(b[b.length-2],10):d.fonts[this.fontName].size,this.dirty=!0},h.updateText=function(){for(var a=d.fonts[this.fontName],b=new g,c=null,e=[],h=0,i=[],j=0,k=this.fontSize/a.size,l=0;l<this.text.length;l++){var m=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))i.push(b.x),h=Math.max(h,b.x),j++,b.x=0,b.y+=a.lineHeight,c=null;else{var n=a.chars[m];n&&(c&&n[c]&&(b.x+=n.kerning[c]),e.push({texture:n.texture,line:j,charCode:m,position:new g(b.x+n.xOffset,b.y+n.yOffset)}),b.x+=n.xAdvance,c=m)}}i.push(b.x),h=Math.max(h,b.x);var o=[];for(l=0;j>=l;l++){var p=0;"right"===this.style.align?p=h-i[l]:"center"===this.style.align&&(p=(h-i[l])/2),o.push(p)}for(l=0;l<e.length;l++){var q=new f(e[l].texture);q.position.x=(e[l].position.x+o[e[l].line])*k,q.position.y=e[l].position.y*k,q.scale.x=q.scale.y=k,this.addChild(q)}this.width=h*k,this.height=(b.y+a.lineHeight)*k},h.updateTransform=function(){if(this.dirty){for(;this.children.length>0;)this.removeChild(this.getChildAt(0));this.updateText(),this.dirty=!1}e.prototype.updateTransform.call(this)},d.fonts={},b.exports=d},{"../display/DisplayObjectContainer":4,"../display/Sprite":6,"../geom/Point":34}],60:[function(a,b,c){"use strict";function d(a,b){this.canvas=e.createCanvas(),this.context=this.canvas.getContext("2d"),h.call(this,i.fromCanvas(this.canvas)),this.setText(a),this.setStyle(b),this.updateText(),this.dirty=!1}var e=a("../platform"),f=a("../core/globals"),g=a("../geom/Point"),h=a("../display/Sprite"),i=a("../textures/Texture"),j=d.prototype=Object.create(h.prototype,{constructor:{value:d}});j.setStyle=function(a){a=a||{},a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,this.style=a,this.dirty=!0},j.setText=function(a){this.text=a.toString()||" ",this.dirty=!0},j.updateText=function(){this.context.font=this.style.font;var a=this.text;this.style.wordWrap&&(a=this.wordWrap(this.text));for(var b=a.split(/(?:\r\n|\r|\n)/),c=[],d=0,e=0;e<b.length;e++){var f=this.context.measureText(b[e]).width;c[e]=f,d=Math.max(d,f)}this.canvas.width=d+this.style.strokeThickness;var h=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness;for(this.canvas.height=h*b.length,this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top",e=0;e<b.length;e++){var i=new g(this.style.strokeThickness/2,this.style.strokeThickness/2+e*h);"right"===this.style.align?i.x+=d-c[e]:"center"===this.style.align&&(i.x+=(d-c[e])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(b[e],i.x,i.y),this.style.fill&&this.context.fillText(b[e],i.x,i.y)}this.updateTexture()},j.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,f.texturesToUpdate.push(this.texture.baseTexture)},j.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),h.prototype.updateTransform.call(this)},j.determineFontHeight=function(a){var b=d.heightCache[a];if(!b){var c=e.document.getElementsByTagName("body")[0],f=e.document.createElement("div"),g=e.document.createTextNode("M");f.appendChild(g),f.setAttribute("style",a+";position:absolute;top:0;left:0"),c.appendChild(f),b=f.offsetHeight,d.heightCache[a]=b,c.removeChild(f)}return b},j.wordWrap=function(a){for(var b="",c=a.split("\n"),d=0;d<c.length;d++){for(var e=this.style.wordWrapWidth,f=c[d].split(" "),g=0;g<f.length;g++){var h=this.context.measureText(f[g]).width,i=h+this.context.measureText(" ").width;i>e?(g>0&&(b+="\n"),b+=f[g]+" ",e=this.style.wordWrapWidth-h):(e-=i,b+=f[g]+" ")}b+="\n"}return b},j.destroy=function(a){a&&this.texture.destroy()},d.heightCache={},b.exports=d},{"../core/globals":2,"../display/Sprite":6,"../geom/Point":34,"../platform":45,"../textures/Texture":63}],61:[function(a,b,c){"use strict";function d(a,b){if(g.call(this),this.width=100,this.height=100,this.scaleMode=b||d.SCALE_MODE.DEFAULT,this.hasLoaded=!1,this.source=a,a){if("complete"in this.source)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,f.texturesToUpdate.push(this);else{var c=this;this.source.onload=function(){c.hasLoaded=!0,c.width=c.source.width,c.height=c.source.height,f.texturesToUpdate.push(c),c.dispatchEvent({type:"loaded",content:c})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,f.texturesToUpdate.push(this);this.imageUrl=null,this._powerOf2=!1}}var e=a("../platform"),f=a("../core/globals"),g=a("../events/EventTarget"),h={},i=d.prototype;i.destroy=function(){this.source.src&&(this.imageUrl in h&&delete h[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,f.texturesToDestroy.push(this)},i.updateSourceImage=function(a){this.hasLoaded=!1,this.source.src=null,this.source.src=a},d.fromImage=function(a,b,c){var f=h[a];if(!f){var g=new e.createImage;b&&(g.crossOrigin=""),g.src=a,f=new d(g,c),f.imageUrl=a,h[a]=f}return f},d.SCALE_MODE={DEFAULT:0,LINEAR:0,NEAREST:1},b.exports=d},{"../core/globals":2,"../events/EventTarget":9,"../platform":45}],62:[function(a,b,c){"use strict";function d(a,b){k.call(this),this.width=a||100,this.height=b||100,this.identityMatrix=f.create(),this.frame=new j(0,0,this.width,this.height),e.gl?this.initWebGL():this.initCanvas()}var e=a("../core/globals"),f=a("../geom/matrix").mat3,g=a("./Texture"),h=a("./BaseTexture"),i=a("../geom/Point"),j=a("../geom/Rectangle"),k=a("../events/EventTarget"),l=a("../renderers/canvas/CanvasRenderer"),m=a("../renderers/webgl/WebGLRenderGroup"),n=d.prototype=Object.create(g.prototype,{constructor:{value:d}});n.initWebGL=function(){var a=e.gl;this.glFramebuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this.glFramebuffer),this.glFramebuffer.width=this.width,this.glFramebuffer.height=this.height,this.baseTexture=new h,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTexture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.baseTexture._glTexture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),this.baseTexture.isRender=!0,a.bindFramebuffer(a.FRAMEBUFFER,this.glFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.baseTexture._glTexture,0),this.projection=new i(this.width/2,-this.height/2),this.render=this.renderWebGL},n.resize=function(a,b){if(this.width=a,this.height=b,e.gl){this.projection.x=this.width/2,this.projection.y=-this.height/2;var c=e.gl;c.bindTexture(c.TEXTURE_2D,this.baseTexture._glTexture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.width,this.height,0,c.RGBA,c.UNSIGNED_BYTE,null)}else this.frame.width=this.width,this.frame.height=this.height,this.renderer.resize(this.width,this.height)},n.initCanvas=function(){this.renderer=new l(this.width,this.height,null,0),this.baseTexture=new h(this.renderer.view),this.frame=new j(0,0,this.width,this.height),this.render=this.renderCanvas},n.renderWebGL=function(a,b,c){var d=e.gl;d.colorMask(!0,!0,!0,!0),d.viewport(0,0,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.glFramebuffer),c&&(d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT));var g=a.children,h=a.worldTransform;a.worldTransform=f.create(),a.worldTransform[4]=-1,a.worldTransform[5]=-2*this.projection.y,b&&(a.worldTransform[2]=b.x,a.worldTransform[5]-=b.y),e.visibleCount++,a.vcount=e.visibleCount;for(var i=0,j=g.length;j>i;i++)g[i].updateTransform();var k=a.__renderGroup;k?a===k.root?k.render(this.projection,this.glFramebuffer):k.renderSpecific(a,this.projection,this.glFramebuffer):(this.renderGroup||(this.renderGroup=new m(d)),this.renderGroup.setRenderable(a),this.renderGroup.render(this.projection,this.glFramebuffer)),a.worldTransform=h},n.renderCanvas=function(a,b,c){var d=a.children;a.worldTransform=f.create(),b&&(a.worldTransform[2]=b.x,a.worldTransform[5]=b.y);for(var e=0,g=d.length;g>e;e++)d[e].updateTransform();c&&this.renderer.context.clearRect(0,0,this.width,this.height),this.renderer.renderDisplayObject(a),this.renderer.context.setTransform(1,0,0,1,0,0)},b.exports=d},{"../core/globals":2,"../events/EventTarget":9,"../geom/Point":34,"../geom/Rectangle":36,"../geom/matrix":37,"../renderers/canvas/CanvasRenderer":47,"../renderers/webgl/WebGLRenderGroup":54,"./BaseTexture":61,"./Texture":63}],63:[function(a,b,c){"use strict";function d(a,b){if(h.call(this),b||(this.noFrame=!0,b=new g(0,0,1,1)),a instanceof d&&(a=a.baseTexture),this.baseTexture=a,this.frame=b,this.trim=new f,this.scope=this,a.hasLoaded)this.noFrame&&(b=new g(0,0,a.width,a.height)),this.setFrame(b);else{var c=this;a.addEventListener("loaded",function(){c.onBaseTextureLoaded()})}}var e=a("./BaseTexture"),f=a("../geom/Point"),g=a("../geom/Rectangle"),h=a("../events/EventTarget"),i=d.prototype;i.onBaseTextureLoaded=function(){var a=this.baseTexture;a.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new g(0,0,a.width,a.height)),this.noFrame=!1,this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:"update",content:this})},i.destroy=function(a){a&&this.baseTexture.destroy()},i.setFrame=function(a){if(this.frame=a,this.width=a.width,this.height=a.height,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,d.frameUpdates.push(this)},d.fromImage=function(a,b,c){var f=d.cache[a];return f||(f=new d(e.fromImage(a,b,c)),d.cache[a]=f),f},d.fromFrame=function(a){var b=d.cache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return b},d.fromCanvas=function(a,b){var c=new e(a,b);return new d(c)},d.addTextureToCache=function(a,b){d.cache[b]=a},d.removeTextureFromCache=function(a){var b=d.cache[a];return d.cache[a]=null,b},d.cache={},d.frameUpdates=[],d.SCALE_MODE=e.SCALE_MODE,b.exports=d},{"../events/EventTarget":9,"../geom/Point":34,"../geom/Rectangle":36,"./BaseTexture":61}],64:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v}function e(a,b,c,d,e,f,g){return(b-d)*(e-c)+(c-a)*(f-d)>=0===g}var f=a("../platform");c.triangulate=function(a){var b=!0,c=a.length>>1;if(3>c)return[];for(var g=[],h=[],i=0;c>i;i++)h.push(i);i=0;for(var j=c;j>3;){var k=h[(i+0)%j],l=h[(i+1)%j],m=h[(i+2)%j],n=a[2*k],o=a[2*k+1],p=a[2*l],q=a[2*l+1],r=a[2*m],s=a[2*m+1],t=!1;if(e(n,o,p,q,r,s,b)){t=!0;for(var u=0;j>u;u++){var v=h[u];if(v!==k&&v!==l&&v!==m&&d(a[2*v],a[2*v+1],n,o,p,q,r,s)){t=!1;break}}}if(t)g.push(k,l,m),h.splice((i+1)%j,1),j--,i=0;else if(i++>3*j){if(!b)return f.console.warn("PIXI Warning: shape too complex to fill"),[];for(g=[],h=[],i=0;c>i;i++)h.push(i);i=0,j=c,b=!1}}return g.push(h[0],h[1],h[2]),g}},{"../platform":45}],65:[function(a,b,c){"use strict";var d=a("../platform"),e=a("../renderers/canvas/CanvasRenderer"),f=a("../renderers/webgl/WebGLRenderer");b.exports=function(a,b,c,g,h){a||(a=800),b||(b=600);var i=function(){try{var a=d.createCanvas();return!!d.window.WebGLRenderingContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))}catch(b){return!1}}();if(i&&d.navigator){var j=-1!==d.navigator.userAgent.toLowerCase().indexOf("trident");i=!j}return i?new f(a,b,c,g,h):new e(a,b,c,g)}},{"../platform":45,"../renderers/canvas/CanvasRenderer":47,"../renderers/webgl/WebGLRenderer":55}],66:[function(a,b,c){"use strict";c.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(255&a)/255]}},{}],67:[function(a,b,c){"use strict";function d(a){var b=f.console;b.groupCollapsed?b.groupCollapsed(a):b.group?b.group(a):b.log(a+" >>>>>>>>>")}function e(a){var b=f.console;b.groupEnd?b.groupEnd(a):b.log(a+" _________")}var f=a("../platform");c.runList=function(a,b){var c=0,g=a.first;for(b="pixi.runList"+(b?"("+b+")":""),d(b),f.console.log(g);g._iNext;)if(c++,g=g._iNext,f.console.log(g),c>100){f.console.log("BREAK");break}e(b)}},{"../platform":45}],68:[function(a,b,c){"use strict";for(var d=a("../platform").global,e=0,f=["ms","moz","webkit","o"],g=0;g<f.length&&!d.requestAnimationFrame;++g)d.requestAnimationFrame=d[f[g]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[f[g]+"CancelAnimationFrame"]||d[f[g]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-e)),f=d.setTimeout(function(){a(b+c)},c);return e=b+c,f}),d.cancelAnimationFrame||(d.cancelAnimationFrame=function(a){d.clearTimeout(a)}),b.exports=d.requestAnimationFrame},{"../platform":45}],69:[function(a,b,c){"use strict";var d=b.exports={};d.BoneData=function(a,b){this.name=a,this.parent=b},d.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},d.SlotData=function(a,b){this.name=a,this.boneData=b},d.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},d.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},d.Bone.yDown=!1,d.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var c=this.parent;null!=c?(this.worldX=this.x*c.m00+this.y*c.m01+c.worldX,this.worldY=this.x*c.m10+this.y*c.m11+c.worldY,this.worldScaleX=c.worldScaleX*this.scaleX,this.worldScaleY=c.worldScaleY*this.scaleY,this.worldRotation=c.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var e=this.worldRotation*Math.PI/180,f=Math.cos(e),g=Math.sin(e);this.m00=f*this.worldScaleX,this.m10=g*this.worldScaleX,this.m01=-g*this.worldScaleY,this.m11=f*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b&&(this.m10=-this.m10,this.m11=-this.m11),d.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},d.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},d.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},d.Skin=function(a){this.name=a,this.attachments={}},d.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d),10),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},d.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},d.Animation.prototype={apply:function(a,b,c){c&&this.duration&&(b%=this.duration);for(var d=this.timelines,e=0,f=d.length;f>e;e++)d[e].apply(a,b,1)},mix:function(a,b,c,d){c&&this.duration&&(b%=this.duration);for(var e=this.timelines,f=0,g=e.length;g>f;f++)e[f].apply(a,b,d)}},d.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(!e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},d.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},d.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},d.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(!m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},d.RotateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=2*a},d.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c){var e,f=this.frames;if(!(b<f[0])){var g=a.bones[this.boneIndex];if(b>=f[f.length-2]){for(e=g.data.rotation+f[f.length-1]-g.rotation;e>180;)e-=360;for(;-180>e;)e+=360;return void(g.rotation+=e*c)}var h=d.binarySearch(f,b,2),i=f[h-1],j=f[h],k=1-(b-j)/(f[h-2]-j);for(k=this.curves.getCurvePercent(h/2-1,k),e=f[h+1]-i;e>180;)e-=360;for(;-180>e;)e+=360;for(e=g.data.rotation+(i+e*k)-g.rotation;e>180;)e-=360;for(;-180>e;)e+=360;g.rotation+=e*c}}},d.TranslateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c){var e=this.frames;if(!(b<e[0])){var f=a.bones[this.boneIndex];if(b>=e[e.length-3])return f.x+=(f.data.x+e[e.length-2]-f.x)*c,void(f.y+=(f.data.y+e[e.length-1]-f.y)*c);var g=d.binarySearch(e,b,3),h=e[g-2],i=e[g-1],j=e[g],k=1-(b-j)/(e[g+-3]-j);k=this.curves.getCurvePercent(g/3-1,k),f.x+=(f.data.x+h+(e[g+1]-h)*k-f.x)*c,f.y+=(f.data.y+i+(e[g+2]-i)*k-f.y)*c}}},d.ScaleTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c){var e=this.frames;if(!(b<e[0])){var f=a.bones[this.boneIndex];if(b>=e[e.length-3])return f.scaleX+=(f.data.scaleX-1+e[e.length-2]-f.scaleX)*c,void(f.scaleY+=(f.data.scaleY-1+e[e.length-1]-f.scaleY)*c);var g=d.binarySearch(e,b,3),h=e[g-2],i=e[g-1],j=e[g],k=1-(b-j)/(e[g+-3]-j);k=this.curves.getCurvePercent(g/3-1,k),f.scaleX+=(f.data.scaleX-1+h+(e[g+1]-h)*k-f.scaleX)*c,f.scaleY+=(f.data.scaleY-1+i+(e[g+2]-i)*k-f.scaleY)*c}}},d.ColorTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=5*a},d.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,
this.frames[a+4]=f},apply:function(a,b,c){var e=this.frames;if(!(b<e[0])){var f=a.slots[this.slotIndex];if(b>=e[e.length-5]){var g=e.length-1;return f.r=e[g-3],f.g=e[g-2],f.b=e[g-1],void(f.a=e[g])}var h=d.binarySearch(e,b,5),i=e[h-4],j=e[h-3],k=e[h-2],l=e[h-1],m=e[h],n=1-(b-m)/(e[h-5]-m);n=this.curves.getCurvePercent(h/5-1,n);var o=i+(e[h+1]-i)*n,p=j+(e[h+2]-j)*n,q=k+(e[h+3]-k)*n,r=l+(e[h+4]-l)*n;1>c?(f.r+=(o-f.r)*c,f.g+=(p-f.g)*c,f.b+=(q-f.b)*c,f.a+=(r-f.a)*c):(f.r=o,f.g=p,f.b=q,f.a=r)}}},d.AttachmentTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},d.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var e=this.frames;if(!(b<e[0])){var f;f=b>=e[e.length-1]?e.length-1:d.binarySearch(e,b,1)-1;var g=this.attachmentNames[f];a.slots[this.slotIndex].setAttachment(g?a.getAttachmentBySlotIndex(this.slotIndex,g):null)}}},d.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},d.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},d.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var e=a.bones[b],f=e.parent?this.bones[a.bones.indexOf(e.parent)]:null;this.bones.push(new d.Bone(e,f))}for(this.slots=[],this.drawOrder=[],b=0,c=a.slots.length;c>b;b++){var g=a.slots[b],h=this.bones[a.bones.indexOf(g.boneData)],i=new d.Slot(g,this,h);this.slots.push(i),this.drawOrder.push(i)}},d.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin),this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.size;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachment(d,b),null==g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},update:function(a){this.time+=a}},d.AttachmentType={region:0},d.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},d.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},d.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},d.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},d.AnimationState=function(a){this.data=a,this.queue=[]},d.AnimationState.prototype={current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(a){if(this.currentTime+=a,this.previousTime+=a,this.mixTime+=a,this.queue.length>0){var b=this.queue[0];this.currentTime>=b.delay&&(this._setAnimation(b.animation,b.loop),this.queue.shift())}},apply:function(a){if(this.current)if(this.previous){this.previous.apply(a,this.previousTime,this.previousLoop);var b=this.mixTime/this.mixDuration;b>=1&&(b=1,this.previous=null),this.current.mix(a,this.currentTime,this.currentLoop,b)}else this.current.apply(a,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(a,b){this.previous=null,a&&this.current&&(this.mixDuration=this.data.getMix(this.current,a),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=a,this.currentLoop=b,this.currentTime=0},setAnimationByName:function(a,b){var c=this.data.skeletonData.findAnimation(a);if(!c)throw"Animation not found: "+a;this.setAnimation(c,b)},setAnimation:function(a,b){this.queue.length=0,this._setAnimation(a,b)},addAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;this.addAnimation(d,b,c)},addAnimation:function(a,b,c){var d={};if(d.animation=a,d.loop=b,!c||0>=c){var e=this.queue.length?this.queue[this.queue.length-1].animation:this.current;c=null!=e?e.duration-this.data.getMix(e,a)+(c||0):0}d.delay=c,this.queue.push(d)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},d.SkeletonJson=function(a){this.attachmentLoader=a},d.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b,c=new d.SkeletonData,e=a.bones,f=0,g=e.length;g>f;f++){var h=e[f],i=null;if(h.parent&&(i=c.findBone(h.parent),!i))throw"Parent bone not found: "+h.parent;b=new d.BoneData(h.name,i),b.length=(h.length||0)*this.scale,b.x=(h.x||0)*this.scale,b.y=(h.y||0)*this.scale,b.rotation=h.rotation||0,b.scaleX=h.scaleX||1,b.scaleY=h.scaleY||1,c.bones.push(b)}var j=a.slots;for(f=0,g=j.length;g>f;f++){var k=j[f];if(b=c.findBone(k.bone),!b)throw"Slot bone not found: "+k.bone;var l=new d.SlotData(k.name,b),m=k.color;m&&(l.r=d.SkeletonJson.toColor(m,0),l.g=d.SkeletonJson.toColor(m,1),l.b=d.SkeletonJson.toColor(m,2),l.a=d.SkeletonJson.toColor(m,3)),l.attachmentName=k.attachment,c.slots.push(l)}var n=a.skins;for(var o in n)if(n.hasOwnProperty(o)){var p=n[o],q=new d.Skin(o);for(var r in p)if(p.hasOwnProperty(r)){var s=c.findSlotIndex(r),t=p[r];for(var u in t)if(t.hasOwnProperty(u)){var v=this.readAttachment(q,u,t[u]);null!=v&&q.addAttachment(s,u,v)}}c.skins.push(q),"default"==q.name&&(c.defaultSkin=q)}var w=a.animations;for(var x in w)w.hasOwnProperty(x)&&this.readAnimation(x,w[x],c);return c},readAttachment:function(a,b,c){b=c.name||b;var e=d.AttachmentType[c.type||"region"];if(e==d.AttachmentType.region){var f=new d.RegionAttachment;return f.x=(c.x||0)*this.scale,f.y=(c.y||0)*this.scale,f.scaleX=c.scaleX||1,f.scaleY=c.scaleY||1,f.rotation=c.rotation||0,f.width=(c.width||32)*this.scale,f.height=(c.height||32)*this.scale,f.updateOffset(),f.rendererObject={},f.rendererObject.name=b,f.rendererObject.scale={},f.rendererObject.scale.x=f.scaleX,f.rendererObject.scale.y=f.scaleY,f.rendererObject.rotation=-f.rotation*Math.PI/180,f}throw"Unknown attachment type: "+e},readAnimation:function(a,b,c){var e,f,g,h,i,j,k,l=[],m=0,n=b.bones;for(var o in n)if(n.hasOwnProperty(o)){var p=c.findBoneIndex(o);if(-1==p)throw"Bone not found: "+o;var q=n[o];for(g in q)if(q.hasOwnProperty(g))if(i=q[g],"rotate"==g){for(f=new d.RotateTimeline(i.length),f.boneIndex=p,e=0,j=0,k=i.length;k>j;j++)h=i[j],f.setFrame(e,h.time,h.angle),d.SkeletonJson.readCurve(f,e,h),e++;l.push(f),m=Math.max(m,f.frames[2*f.getFrameCount()-2])}else{if("translate"!=g&&"scale"!=g)throw"Invalid timeline type for a bone: "+g+" ("+o+")";var r=1;for("scale"==g?f=new d.ScaleTimeline(i.length):(f=new d.TranslateTimeline(i.length),r=this.scale),f.boneIndex=p,e=0,j=0,k=i.length;k>j;j++){h=i[j];var s=(h.x||0)*r,t=(h.y||0)*r;f.setFrame(e,h.time,s,t),d.SkeletonJson.readCurve(f,e,h),e++}l.push(f),m=Math.max(m,f.frames[3*f.getFrameCount()-3])}}var u=b.slots;for(var v in u)if(u.hasOwnProperty(v)){var w=u[v],x=c.findSlotIndex(v);for(g in w)if(w.hasOwnProperty(g))if(i=w[g],"color"==g){for(f=new d.ColorTimeline(i.length),f.slotIndex=x,e=0,j=0,k=i.length;k>j;j++){h=i[j];var y=h.color,z=d.SkeletonJson.toColor(y,0),A=d.SkeletonJson.toColor(y,1),B=d.SkeletonJson.toColor(y,2),C=d.SkeletonJson.toColor(y,3);f.setFrame(e,h.time,z,A,B,C),d.SkeletonJson.readCurve(f,e,h),e++}l.push(f),m=Math.max(m,f.frames[5*f.getFrameCount()-5])}else{if("attachment"!=g)throw"Invalid timeline type for a slot: "+g+" ("+v+")";for(f=new d.AttachmentTimeline(i.length),f.slotIndex=x,e=0,j=0,k=i.length;k>j;j++)h=i[j],f.setFrame(e++,h.time,h.name);l.push(f),m=Math.max(m,f.frames[f.getFrameCount()-1])}}c.animations.push(new d.Animation(a,l,m))}},d.SkeletonJson.readCurve=function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},d.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2),16)/255},d.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new d.AtlasReader(a),e=[];e.length=4;for(var f=null;;){var g=c.readLine();if(null==g)break;if(g=c.trim(g),g.length)if(f){var h=new d.AtlasRegion;h.name=g,h.page=f,h.rotate="true"==c.readValue(),c.readTuple(e);var i=parseInt(e[0],10),j=parseInt(e[1],10);c.readTuple(e);var k=parseInt(e[0],10),l=parseInt(e[1],10);h.u=i/f.width,h.v=j/f.height,h.rotate?(h.u2=(i+l)/f.width,h.v2=(j+k)/f.height):(h.u2=(i+k)/f.width,h.v2=(j+l)/f.height),h.x=i,h.y=j,h.width=Math.abs(k),h.height=Math.abs(l),4==c.readTuple(e)&&(h.splits=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)],4==c.readTuple(e)&&(h.pads=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)],c.readTuple(e))),h.originalWidth=parseInt(e[0],10),h.originalHeight=parseInt(e[1],10),c.readTuple(e),h.offsetX=parseInt(e[0],10),h.offsetY=parseInt(e[1],10),h.index=parseInt(c.readValue(),10),this.regions.push(h)}else{f=new d.AtlasPage,f.name=g,f.format=d.Atlas.Format[c.readValue()],c.readTuple(e),f.minFilter=d.Atlas.TextureFilter[e[0]],f.magFilter=d.Atlas.TextureFilter[e[1]];var m=c.readValue();f.uWrap=d.Atlas.TextureWrap.clampToEdge,f.vWrap=d.Atlas.TextureWrap.clampToEdge,"x"==m?f.uWrap=d.Atlas.TextureWrap.repeat:"y"==m?f.vWrap=d.Atlas.TextureWrap.repeat:"xy"==m&&(f.uWrap=f.vWrap=d.Atlas.TextureWrap.repeat),b.load(f,g),this.pages.push(f)}else f=null}},d.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},d.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},d.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},d.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},d.AtlasPage=function(){},d.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},d.AtlasRegion=function(){},d.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},d.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},d.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f){if(!d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},d.AtlasAttachmentLoader=function(a){this.atlas=a},d.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,c){switch(b){case d.AttachmentType.region:var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" ("+b+")";var f=new d.RegionAttachment(c);return f.rendererObject=e,f.setUVs(e.u,e.v,e.u2,e.v2,e.rotate),f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f}throw"Unknown attachment type: "+b}},d.Bone.yDown=!0},{}],70:[function(a,b,c){var d=a("pixi/platform");d.global.PIXI=a("pixi"),d.global.requestAnimFrame=a("pixi/utils/raf")},{pixi:38,"pixi/platform":45,"pixi/utils/raf":68}]},{},[70])}({},function(){return this}());